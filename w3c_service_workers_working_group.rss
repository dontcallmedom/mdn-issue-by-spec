<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>W3C Service Workers Working Group-relevant MDN issues</title>
        <link>https://dontcallmedom.github.io/mdn-issue-by-spec/w3c_service_workers_working_group.rss</link>
        <description>Issue filed on MDN Web Docs related to pages attached to technologies developed by W3C Service Workers Working Group</description>
        <lastBuildDate>Sat, 08 Apr 2023 11:59:21 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[[ecmascript, service-workers-1] Please specify that `openWindow()` and `focus()` only works when the user clicked on a notification]]></title>
            <link>https://github.com/mdn/content/issues/26048</link>
            <guid>https://github.com/mdn/content/issues/26048</guid>
            <pubDate>Sat, 08 Apr 2023 11:59:21 GMT</pubDate>
            <content:encoded><![CDATA[<h3 dir="auto">MDN URL</h3>
<p dir="auto"><a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowClient/focus" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/WindowClient/focus</a></p>
<h3 dir="auto">What specific section or headline is this issue about?</h3>
<p dir="auto"><em>No response</em></p>
<h3 dir="auto">What information was incorrect, unhelpful, or incomplete?</h3>
<p dir="auto">The paragraph that contains the following text:</p>
<blockquote>
<p dir="auto">The <code class="notranslate">focus()</code> method of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowClient" rel="nofollow"><code class="notranslate">WindowClient</code></a> interface gives user input focus to the current client and returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow"><code class="notranslate">Promise</code></a> that resolves to the existing <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowClient" rel="nofollow"><code class="notranslate">WindowClient</code></a>.</p>
</blockquote>
<h3 dir="auto">What did you expect to see?</h3>
<p dir="auto">It should be also stated that it will only work when the user clicked on a notification, and only during the click handler. Also, you can only call either <code class="notranslate">openWindow()</code> or <code class="notranslate">focus()</code>, but not both, and only once.</p>
<h3 dir="auto">Do you have any supporting links, references, or citations?</h3>
<p dir="auto"><a href="https://stackoverflow.com/a/34250261" rel="nofollow">https://stackoverflow.com/a/34250261</a></p>
<blockquote>
<p dir="auto">Your code works fine for me, so I'll explain the requirements for using <code class="notranslate">openWindow</code> / <code class="notranslate">focus</code>, and how you can avoid the "Not allowed to [open|focus] a window" error message.</p>
<p dir="auto"><code class="notranslate">clients.openWindow()</code> and <code class="notranslate">windowClient.focus()</code> are only allowed after clicking the notification (in Chrome 47 at least), and at most <strong>one</strong> of these methods can be called, for the duration of the click handler. This behavior was specified in <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="54457137" data-permission-text="Title is private" data-url="https://github.com/w3c/ServiceWorker/issues/602" data-hovercard-type="issue" data-hovercard-url="/w3c/ServiceWorker/issues/602/hovercard" href="https://github.com/w3c/ServiceWorker/issues/602">w3c/ServiceWorker#602</a>.</p>
<p dir="auto">If your <code class="notranslate">openWindow</code> / <code class="notranslate">focus</code> call is rejected with error message</p>
<blockquote>
<p dir="auto">"Not allowed to open a window." for <code class="notranslate">openWindow</code><br>
"Not allowed to focus a window." for <code class="notranslate">focus</code></p>
</blockquote>
<p dir="auto">then you didn't satisfy the requirements of <code class="notranslate">openWindow</code> / <code class="notranslate">focus</code>. For example (all points also apply to <code class="notranslate">focus</code>, not just <code class="notranslate">openWindow</code>).</p>
<ul dir="auto">
<li><code class="notranslate">openWindow</code> was called while the notification wasn't clicked.</li>
<li><code class="notranslate">openWindow</code> was called after the <code class="notranslate">notificationclick</code> handler returned, and you did not call <code class="notranslate">event.waitUntil</code> with a promise.</li>
<li><code class="notranslate">openWindow</code> was called after the promise passed to <code class="notranslate">event.waitUntil</code> was resolved.</li>
<li>The promise was not resolved, but it took "too long" ([10 seconds in Chrome][1]), so the temporary permission to call <code class="notranslate">openWindow</code> expired.</li>
</ul>
<p dir="auto">It is really necessary that <code class="notranslate">openWindow</code> / <code class="notranslate">focus</code> is called at most once, and before the <code class="notranslate">notificationclick</code> handler finishes.</p>
</blockquote>
<h3 dir="auto">Do you have anything more you want to share?</h3>
<p dir="auto"><em>No response</em></p>
<h3 dir="auto">MDN metadata</h3>

<details>
<summary>Page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/windowclient/focus</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowClient/focus" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/WindowClient/focus</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/windowclient/focus/index.md">https://github.com/mdn/content/blob/main/files/en-us/web/api/windowclient/focus/index.md</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/73b724ad82b94d2a4c314924218367cea2740e97/hovercard" href="https://github.com/mdn/content/commit/73b724ad82b94d2a4c314924218367cea2740e97"><tt>73b724a</tt></a></li>
<li>Document last modified: 2023-03-16T15:51:10.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[service-workers-1] Fetch Event client id is null]]></title>
            <link>https://github.com/mdn/content/issues/20657</link>
            <guid>https://github.com/mdn/content/issues/20657</guid>
            <pubDate>Tue, 13 Sep 2022 11:22:55 GMT</pubDate>
            <content:encoded><![CDATA[<h3 dir="auto">MDN URL</h3>
<p dir="auto"><a href="https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent/clientId" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent/clientId</a></p>
<h3 dir="auto">What specific section or headline is this issue about?</h3>
<p dir="auto">Client id is null</p>
<h3 dir="auto">What information was incorrect, unhelpful, or incomplete?</h3>
<p dir="auto">As per specifications and implementation client for non subresource request is null</p>
<h3 dir="auto">What did you expect to see?</h3>
<p dir="auto">Mention it is null for non subresource request</p>
<h3 dir="auto">Do you have any supporting links, references, or citations?</h3>
<p dir="auto"><em>No response</em></p>
<h3 dir="auto">Do you have anything more you want to share?</h3>
<p dir="auto"><em>No response</em></p>
<h3 dir="auto">MDN metadata</h3>

<details>
<summary>Page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/fetchevent/clientid</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent/clientId" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent/clientId</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/fetchevent/clientid/index.md">https://github.com/mdn/content/blob/main/files/en-us/web/api/fetchevent/clientid/index.md</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/1511e914c6b1ce6f88056bfefd48a6aa585cebce/hovercard" href="https://github.com/mdn/content/commit/1511e914c6b1ce6f88056bfefd48a6aa585cebce"><tt>1511e91</tt></a></li>
<li>Document last modified: 2022-09-09T05:10:34.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[service-workers-1] Issue with "Client.postMessage()": Page does not give a full code example, or enough context to create one]]></title>
            <link>https://github.com/mdn/content/issues/10573</link>
            <guid>https://github.com/mdn/content/issues/10573</guid>
            <pubDate>Tue, 16 Nov 2021 20:28:09 GMT</pubDate>
            <content:encoded><![CDATA[<p dir="auto">MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage</a></p>
<h4 dir="auto">What information was incorrect, unhelpful, or incomplete?</h4>
<p dir="auto">When providing an example of how to get a client from an eventId, there is not enough context to know where the <code class="notranslate">clients</code> variable comes from, and it takes another scroll through the docs or another google search to be able to paint the whole picture.</p>
<h4 dir="auto">Specific section or headline?</h4>
<p dir="auto">Examples</p>
<h4 dir="auto">What did you expect to see?</h4>
<p dir="auto">I would have expected an example that shows the user one or more of the following:<br>
a) How to match all clients, or a specific client (not necessarily explaining the code, but to give a full example)<br>
b) The main article about getting a client or a list of clients from a servicer worker.</p>
<h4 dir="auto">Did you test this? If so, how?</h4>

<details>
<summary>MDN Content page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/client/postmessage</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/client/postmessage/index.md">https://github.com/mdn/content/blob/main/files/en-us/web/api/client/postmessage/index.md</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/2279e5ae6c229c707a014a22aa1ec4635a0f981f/hovercard" href="https://github.com/mdn/content/commit/2279e5ae6c229c707a014a22aa1ec4635a0f981f"><tt>2279e5a</tt></a></li>
<li>Document last modified: 2021-09-14T18:08:09.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[service-workers-1] Issue with "ServiceWorkerContainer.register()": Second example unclear on intent]]></title>
            <link>https://github.com/mdn/content/issues/10547</link>
            <guid>https://github.com/mdn/content/issues/10547</guid>
            <pubDate>Mon, 15 Nov 2021 14:17:23 GMT</pubDate>
            <content:encoded><![CDATA[<p dir="auto">MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register</a></p>
<h4 dir="auto">What information was incorrect, unhelpful, or incomplete?</h4>
<p dir="auto">It's unclear if second example is meant to show invalid usage or not</p>
<h4 dir="auto">Specific section or headline?</h4>
<blockquote>
<p dir="auto">Alternatively, if this code were included in a page at example.com/product/description.html, with the Javascript file residing at example.com/product/sw.js, then the service worker would only apply to resources under example.com/product.</p>
<p dir="auto">if ('serviceWorker' in navigator) {<br>
// declaring scope manually<br>
navigator.serviceWorker.register('/sw.js', {scope: './'}).then(function(registration) {</p>
</blockquote>
<h4 dir="auto">What did you expect to see?</h4>
<p dir="auto">The text talks about sw.js residing in <code class="notranslate">example.com/product/sw.js</code>, however example uses <code class="notranslate">/sw.js</code> which is <code class="notranslate">It is relative to the base URL of the application</code>, meaning in this case <code class="notranslate">example.com/sw.js</code>.</p>
<p dir="auto">So either the text or the example is wrong, maybe something like this would be more clear / correct?</p>
<blockquote>
<p dir="auto">Alternatively, if this code were included in a page at example.com/product/description.html, with the Javascript file residing at example.com/sw.js, then the following example shows how to limit scope to example.com/product by using relative scope.</p>
<p dir="auto">if ('serviceWorker' in navigator) {<br>
// declaring scope manually, relative to current URI scope<br>
navigator.serviceWorker.register('/sw.js', {scope: './'}).then(function(registration) {</p>
</blockquote>
<details>
<summary>MDN Content page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/serviceworkercontainer/register</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/serviceworkercontainer/register/index.md">https://github.com/mdn/content/blob/main/files/en-us/web/api/serviceworkercontainer/register/index.md</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/2279e5ae6c229c707a014a22aa1ec4635a0f981f/hovercard" href="https://github.com/mdn/content/commit/2279e5ae6c229c707a014a22aa1ec4635a0f981f"><tt>2279e5a</tt></a></li>
<li>Document last modified: 2021-09-14T18:08:09.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[service-workers-1, payment-request, payment-handler] Content bug: inconsistent/incomplete descriptions of Promises as parameters]]></title>
            <link>https://github.com/mdn/content/issues/9362</link>
            <guid>https://github.com/mdn/content/issues/9362</guid>
            <pubDate>Thu, 30 Sep 2021 07:19:46 GMT</pubDate>
            <content:encoded><![CDATA[<h2 dir="auto">What page(s) did you find the problem on?</h2>
<p dir="auto">Compare the descriptions of parameters here:<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequest/show" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequest/show</a><br>
<a href="https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequestUpdateEvent/updateWith" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequestUpdateEvent/updateWith</a></p>
<h2 dir="auto">What is the problem?</h2>
<p dir="auto"><code class="notranslate">PaymentRequest</code>'s <code class="notranslate">show()</code> method is documented as taking a promise, while <code class="notranslate">PaymentRequestUpdateEvent</code>'s <code class="notranslate">updateWith()</code> method is documented as taking an object. Actually, the two both accept the same kind of parameter, and because of the way that promises work, one can pass either an object directly or a promise that resolves to an object.</p>
<h2 dir="auto">What did you expect to see?</h2>
<p dir="auto">A consistent style that makes it clear what can be used as the argument.</p>
<p dir="auto">Promises as parameters is not very common on the web platform, but there are other cases that also have a mix of styles:</p>
<ul dir="auto">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequestEvent/respondWith" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequestEvent/respondWith</a> (also incorrectly says the <code class="notranslate">PaymentResponse</code> interface instead of the <code class="notranslate">PaymentHandlerResponse</code> dictionary)</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/ExtendableEvent/waitUntil" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/ExtendableEvent/waitUntil</a> (no issue here because the promise can resolve to anything)</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent/respondWith" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent/respondWith</a> (correctly says "<code class="notranslate">Response</code> or a <code class="notranslate">Promise</code> that resolves to a <code class="notranslate">Response</code>")</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/compileStreaming" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/compileStreaming</a> (correctly says "<code class="notranslate">Response</code> object or a promise that will fulfill with one")</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[notifications, cssom-view-1, service-workers-1, dom, pointerevents3] Better naming of pages]]></title>
            <link>https://github.com/mdn/content/issues/8977</link>
            <guid>https://github.com/mdn/content/issues/8977</guid>
            <pubDate>Thu, 16 Sep 2021 10:09:38 GMT</pubDate>
            <content:encoded><![CDATA[<p dir="auto">A big step forward was made in <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="980067493" data-permission-text="Title is private" data-url="https://github.com/mdn/content/issues/8351" data-hovercard-type="pull_request" data-hovercard-url="/mdn/content/pull/8351/hovercard" href="https://github.com/mdn/content/pull/8351">#8351</a>, but I'd like to propose this rule to page naming:</p>
<ol dir="auto">
<li>If the item is available on the global, use the name. Eg:
<ul dir="auto">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/skipWaiting" rel="nofollow"><code class="notranslate">ServiceWorkerGlobalScope.skipWaiting</code></a> becomes <code class="notranslate">skipWaiting</code>.</li>
</ul>
</li>
<li>If the item is typically reached via properties reachable from the global, use that property chain, omitting the global.
<ul dir="auto">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector" rel="nofollow"><code class="notranslate">Document.querySelector</code></a> becomes <code class="notranslate">document.querySelector</code>.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CacheStorage/match" rel="nofollow"><code class="notranslate">CacheStorage.match</code></a> becomes <code class="notranslate">caches.match</code>.</li>
</ul>
</li>
<li>If the item is an instance method/property, use the constructor name with the first set of caps lower-cased + the property name.
<ul dir="auto">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" rel="nofollow"><code class="notranslate">Element.getBoundingClientRect</code></a> becomes <code class="notranslate">element.getBoundingClientRect</code>.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetHeight" rel="nofollow"><code class="notranslate">HTMLElement.offsetHeight</code></a> becomes <code class="notranslate">htmlElement.offsetHeight</code>.</li>
</ul>
</li>
<li>If the item is a static method/property, use the constructor name + the property name.
<ul dir="auto">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Notification/requestPermission" rel="nofollow"><code class="notranslate">Notification.requestPermission</code></a> remains <code class="notranslate">Notification.requestPermission</code>.</li>
</ul>
</li>
<li>Otherwise, just use the name.
<ul dir="auto">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent" rel="nofollow"><code class="notranslate">PointerEvent</code></a> remains <code class="notranslate">PointerEvent</code></li>
</ul>
</li>
</ol>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[service-workers-1] Issue with "ServiceWorkerContainer.register()": may be advisable to check for an existing registration]]></title>
            <link>https://github.com/mdn/content/issues/7138</link>
            <guid>https://github.com/mdn/content/issues/7138</guid>
            <pubDate>Wed, 21 Jul 2021 16:35:44 GMT</pubDate>
            <content:encoded><![CDATA[<p dir="auto">MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register</a></p>
<h4 dir="auto">What information was incorrect, unhelpful, or incomplete?</h4>
<p dir="auto">I assumed (wrongly) from this that registering an already-registered worker would be a no-op. It turns out that it at least causes a network request for the worker, and that request doesn't go via the cache even if you have <code class="notranslate">updateViaCache: 'all'</code> (which makes sense). So regardless of your update mode, not checking for an existing registration will cause extra server load.</p>
<h4 dir="auto">Specific section or headline?</h4>
<blockquote>
<p dir="auto">You can call this method unconditionally from the controlled page. I.e., you don't need to first check whether there's an active registration.</p>
</blockquote>
<h4 dir="auto">What did you expect to see?</h4>
<p dir="auto">More detailed info about why I might <em>want</em> to check for an existing registration, even if I don't <em>need</em> to.</p>
<h4 dir="auto">Did you test this? If so, how?</h4>
<p dir="auto">Yes, looking at request headers in Fiddler.</p>

<details>
<summary>MDN Content page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/serviceworkercontainer/register</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/serviceworkercontainer/register/index.html">https://github.com/mdn/content/blob/main/files/en-us/web/api/serviceworkercontainer/register/index.html</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/642d6eb7feb73e17cfc1ef61d3d09c2d200e65ca/hovercard" href="https://github.com/mdn/content/commit/642d6eb7feb73e17cfc1ef61d3d09c2d200e65ca"><tt>642d6eb</tt></a></li>
<li>Document last modified: 2021-06-17T03:52:55.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
    </channel>
</rss>