{
    "version": "https://jsonfeed.org/version/1",
    "title": "W3C Web Performance Working Group-relevant MDN issues",
    "home_page_url": "https://dontcallmedom.github.io/mdn-issue-by-spec/w3c_web_performance_working_group.rss",
    "description": "Issue filed on MDN Web Docs related to pages attached to technologies developed by W3C Web Performance Working Group",
    "author": {
        "name": "mdn-issue-by-spec",
        "url": "https://github.com/dontcallmedom/mdn-issue-by-spec"
    },
    "items": [
        {
            "id": "https://github.com/mdn/content/issues/14803",
            "content_html": "<p dir=\"auto\">When loading a page with many resources it can be useful to prioritize the requests so that the page appears to render more quickly. It would be useful to have a topic on this.</p>\n<p dir=\"auto\">There are a bunch of ways to do this:</p>\n<ul dir=\"auto\">\n<li>Use <a href=\"/en-US/docs/Web/API/fetch\"><code class=\"notranslate\">fetch()</code></a> and set the priority in <a href=\"/en-US/docs/Web/API/Request/priority\"><code class=\"notranslate\">Request.priority</code></a>.</li>\n<li>Set the HTTP priority on <a href=\"https://developer.mozilla.org//en-US/docs/Web/API/HTMLLinkElement/fetchpriority\" rel=\"nofollow\"><code class=\"notranslate\">HTMLLinkElement</code></a>, <a href=\"https://developer.mozilla.org//en-US/docs/Web/API/HTMLIFrameElement/fetchpriority\" rel=\"nofollow\"><code class=\"notranslate\">HTMLIFrameElement</code></a>, and <a href=\"https://developer.mozilla.org//en-US/docs/Web/API/HTMLImageElement/fetchpriority\" rel=\"nofollow\"><code class=\"notranslate\">HTMLImageElement</code></a> elements (and associated tags) using the <code class=\"notranslate\">fetchpriority</code> attribute.</li>\n<li>In future maybe <a href=\"https://tools.ietf.org/id/draft-ietf-httpbis-priority-01.html\" rel=\"nofollow\">Priority</a> HTTP header. There are also some ideas (<a href=\"https://calibreapp.com/blog/critical-request\" rel=\"nofollow\">from here</a>), some of which may be relevant (e.g. marking the non-critical ones as <code class=\"notranslate\">async</code>):</li>\n<li>Mark non-critical scripts as async</li>\n<li>Consider inlining <a class=\"user-mention notranslate\" data-hovercard-type=\"organization\" data-hovercard-url=\"/orgs/font-face/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/font-face\">@font-face</a> declarations directly into HTML</li>\n<li>Avoid using CSS background images or <a class=\"user-mention notranslate\" data-hovercard-type=\"organization\" data-hovercard-url=\"/orgs/import/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/import\">@import</a></li>\n<li>Use preload to retrieve critical resources earlier</li>\n</ul>\n<p dir=\"auto\">Possible locations for such a page are under these:</p>\n<ul dir=\"auto\">\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/Performance\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/Performance</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/fetch\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/fetch</a> ?</li>\n</ul>\n<p dir=\"auto\">This comes out of the discussion here: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1190042082\" data-permission-text=\"Title is private\" data-url=\"https://github.com/mdn/content/issues/14561\" data-hovercard-type=\"issue\" data-hovercard-url=\"/mdn/content/issues/14561/hovercard\" href=\"https://github.com/mdn/content/issues/14561\">#14561</a></p>",
            "url": "https://github.com/mdn/content/issues/14803",
            "title": "[hr-time-3, performance-timeline-2, resource-timing-2, user-timing-2] Topic on setting HTTP priority of resource requests",
            "date_modified": "2022-04-08T02:53:08.000Z",
            "author": {
                "name": "hamishwillee",
                "url": "https://github.com/hamishwillee"
            }
        },
        {
            "id": "https://github.com/mdn/content/issues/10196",
            "content_html": "<h2 dir=\"auto\">What is the new suggestion?</h2>\n<p dir=\"auto\">Glossary terms:</p>\n<ul dir=\"auto\">\n<li>LCP -&gt; largest contentful paint.</li>\n<li>FID -&gt; First Input Delay</li>\n</ul>\n<h2 dir=\"auto\">Why is it important or useful?</h2>\n<p dir=\"auto\">TTFB and FCP are defined. LCP and FID are needed</p>\n<p dir=\"auto\">How many pages are likely to be needed?<br>\n2<br>\nHow much time do you think this work should take? 5 hours</p>\n<p dir=\"auto\">Will the work enable learners or professionals to achieve their goals better? yes<br>\nDoes it address critical needs in the web industry? yes<br>\nIs the work an operational necessity, i.e. is not having it a security risk? no<br>\nDoes the content help make the web more ethical? yes</p>\n<p dir=\"auto\">MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Glossary\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Glossary</a><br>\nMDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Performance\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Performance</a></p>",
            "url": "https://github.com/mdn/content/issues/10196",
            "title": "[hr-time-3, performance-timeline-2, resource-timing-2, user-timing-2] Content suggestion: performance glossary term: largest contentful paint/First Input Delay",
            "date_modified": "2021-11-01T04:46:51.000Z",
            "author": {
                "name": "estelle",
                "url": "https://github.com/estelle"
            }
        },
        {
            "id": "https://github.com/mdn/content/issues/4713",
            "content_html": "<p dir=\"auto\">MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Performance/now\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Performance/now</a></p>\n<p dir=\"auto\">I've edited this issue a number of times, because monotonic timing in browsers is a <em>deep</em> rabbit hole of standards, implementations, operating system clock APIs, and clock hardware (see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"877952957\" data-permission-text=\"Title is private\" data-url=\"https://github.com/w3c/hr-time/issues/115\" data-hovercard-type=\"issue\" data-hovercard-url=\"/w3c/hr-time/issues/115/hovercard\" href=\"https://github.com/w3c/hr-time/issues/115\">w3c/hr-time#115</a>). The material below attempts to accurately and concisely document current browser behavior.</p>\n<h4 dir=\"auto\">What information was incorrect, unhelpful, or incomplete?</h4>\n<p dir=\"auto\">There are several components of the documentation that are outdated or incomplete.</p>\n<h5 dir=\"auto\">High Resolution Time vs. High Resolution Time Level 2</h5>\n<p dir=\"auto\">The semantics of <code class=\"notranslate\">performance.now()</code> changed from the original High Resolution Time spec to the Level 2 spec. In the original spec, <code class=\"notranslate\">performance.now()</code> was relative to <code class=\"notranslate\">performance.timing.navigationStart</code> from the Navigation Timing spec. In the Level 2 spec, <code class=\"notranslate\">performance.now()</code> is relative to <code class=\"notranslate\">performance.timeOrigin</code>, which is defined in the spec.</p>\n<p dir=\"auto\">There are two key differences between these reference times.</p>\n<ol dir=\"auto\">\n<li>The triggering conditions for <code class=\"notranslate\">navigationStart</code> and <code class=\"notranslate\">timeOrigin</code> are a little different. <code class=\"notranslate\">navigationStart</code> timestamps a document fetch or an unload prompt (if any), while <code class=\"notranslate\">timeOrigin</code> timestamps creation of the browsing context (if no prior document), an unload prompt (if any), or the start of navigation (as defined by the HTML spec, which is a few steps before fetch).</li>\n<li><code class=\"notranslate\">navigationStart</code> is set with the system clock, which might not be monotonic and might not be consistent across navigation events. <code class=\"notranslate\">timeOrigin</code>, by contrast, is set with a shared monotonic clock that is defined to be monotonic, consistent across globals, and initially synced to the system clock (e.g., on browser startup). These properties means that comparing timestamps across webpages with the original spec (<code class=\"notranslate\">performance.timing.navigationStart + performance.now()</code>) has clock change risks, while comparing timestamps across webpages with the Level 2 spec (<code class=\"notranslate\">performance.timeOrigin + performance.now()</code>) doesn't have clock change risks.</li>\n</ol>\n<h5 dir=\"auto\">Ticking During Sleep</h5>\n<p dir=\"auto\">The original High Resolution Time spec does not address whether <code class=\"notranslate\">performance.now()</code> should tick during sleep. There was consensus for the Level 2 spec that <code class=\"notranslate\">performance.now()</code> should tick during sleep (see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"430536011\" data-permission-text=\"Title is private\" data-url=\"https://github.com/w3c/hr-time/issues/65\" data-hovercard-type=\"issue\" data-hovercard-url=\"/w3c/hr-time/issues/65/hovercard\" href=\"https://github.com/w3c/hr-time/issues/65\">w3c/hr-time#65</a>), but the text of the spec is somewhat ambiguous about sleep behavior and whether that's a normative requirement (see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"877952957\" data-permission-text=\"Title is private\" data-url=\"https://github.com/w3c/hr-time/issues/115\" data-hovercard-type=\"issue\" data-hovercard-url=\"/w3c/hr-time/issues/115/hovercard\" href=\"https://github.com/w3c/hr-time/issues/115\">w3c/hr-time#115</a>).</p>\n<p dir=\"auto\">Here's a summary table of how browsers appear to currently handle sleep, where <g-emoji class=\"g-emoji\" alias=\"white_check_mark\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/2705.png\">âœ…</g-emoji> means <code class=\"notranslate\">performance.now()</code> keeps ticking and <g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji> means it doesn't.</p>\n<table role=\"table\">\n<thead>\n<tr>\n<th></th>\n<th>Chrome/Chromium (<a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=1206450\" rel=\"nofollow\">bug</a>)</th>\n<th>Firefox (<a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1709767\" rel=\"nofollow\">bug</a>)</th>\n<th>Safari/WebKit (<a href=\"https://bugs.webkit.org/show_bug.cgi?id=225610\" rel=\"nofollow\">bug</a>)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Windows</strong></td>\n<td><g-emoji class=\"g-emoji\" alias=\"white_check_mark\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/2705.png\">âœ…</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"white_check_mark\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/2705.png\">âœ…</g-emoji></td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><strong>macOS</strong></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n</tr>\n<tr>\n<td><strong>Linux</strong></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji> (except maybe WebKitGTK?)</td>\n</tr>\n<tr>\n<td><strong>Android</strong></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><strong>iOS</strong></td>\n<td>N/A (WebKit wrapper)</td>\n<td>N/A (WebKit wrapper)</td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n</tr>\n</tbody>\n</table>\n<h5 dir=\"auto\">performance.timeOrigin in Chrome and Firefox</h5>\n<p dir=\"auto\">There is currently a <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=1207386\" rel=\"nofollow\">bug</a> in Chrome where <code class=\"notranslate\">performance.timeOrigin</code> is set for each global with the system clock rather than a shared monotonic clock. As a result, comparing High Resolution Time Level 2 timestamps across webpages in Chrome has clock change risks.</p>\n<p dir=\"auto\">There is also currently a <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1710762\" rel=\"nofollow\">bug</a> in Firefox where <code class=\"notranslate\">performance.timeOrigin</code> is set with a monotonic clock that is synced to the system clock once per process, rather than with a shared monotonic clock that is synced to the system clock once on browser startup. The result is the same: comparing High Resolution Time Level 2 timestamps across webpages in Firefox has clock change risks.</p>\n<h4 dir=\"auto\">Clock Drift on macOS</h4>\n<p dir=\"auto\">The current macOS implementation of <code class=\"notranslate\">performance.now()</code> in Chrome/Chromium, Firefox, and Safari/WebKit uses a monotonic clock that does not allow for even small, monotonic adjustments (e.g., NTP oscillator corrections). The result can be clock drift between the system clock and High Resolution Time monotonic clocks. Chrome has a <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=948384\" rel=\"nofollow\">bug</a> open on this issue.</p>\n<h4 dir=\"auto\">Specific section or headline?</h4>\n<p dir=\"auto\">This content probably belongs in the general description of <code class=\"notranslate\">performance.now()</code> because of the significant consequences. Components might also belong on the <code class=\"notranslate\">performance.timeOrigin</code> and <code class=\"notranslate\">DOMHighResTimeStamp</code> pages.</p>\n<h4 dir=\"auto\">What did you expect to see?</h4>\n<ul dir=\"auto\">\n<li>The description is for High Resolution Time Level 2, but the example is for the original spec (referencing <code class=\"notranslate\">performance.timing.navigationStart</code>). The page should probably include a description for both versions of the spec, examples for both versions of the spec, and an explanation of how the two versions differ, since the changes are subtle and Safari/WebKit hasn't implemented Level 2 yet.</li>\n<li>A description of the browser- and platform-specific inconsistencies in sleep behavior, and what that could mean for use cases.</li>\n<li>A mention of the Chrome and Firefox <code class=\"notranslate\">performance.timeOrigin</code> bugs, and what those could mean for use cases.</li>\n<li>A mention of the High Resolution Time clock drift behavior on macOS, and what that could mean for use cases.</li>\n<li>An explicit indication that, while Safari/WebKit does support <code class=\"notranslate\">performance.now()</code>, it has implemented the original High Resolution Time semantics and not the High Resolution Time Level 2 semantics.</li>\n<li>Further explanation of the High Resolution Time Level 2 shared monotonic clock and per-document monotonic clock concepts would be valuable.</li>\n</ul>\n<h4 dir=\"auto\">Did you test this? If so, how?</h4>\n<p dir=\"auto\">I've confirmed the following behaviors with both testing and code review:</p>\n<ul dir=\"auto\">\n<li>Ticking During Sleep\n<ul dir=\"auto\">\n<li>Chrome: Windows, macOS, Linux</li>\n<li>Firefox: Windows, macOS, Linux</li>\n<li>Safari: macOS</li>\n</ul>\n</li>\n<li>Time Origin Set with the System Clock\n<ul dir=\"auto\">\n<li>Chrome: macOS and Linux</li>\n<li>Firefox: macOS and Linux</li>\n</ul>\n</li>\n<li>Clock Drift on macOS\n<ul dir=\"auto\">\n<li>Chrome: macOS</li>\n<li>Firefox: macOS</li>\n<li>Safari: macOS</li>\n</ul>\n</li>\n</ul>\n\n<details>\n<summary>MDN Content page report details</summary>\n<ul dir=\"auto\">\n<li>Folder: <code class=\"notranslate\">en-us/web/api/performance/now</code></li>\n<li>MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Performance/now\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Performance/now</a></li>\n<li>GitHub URL: <a href=\"https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/now/index.html\">https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/now/index.html</a></li>\n<li>Last commit: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/mdn/content/commit/86a69ae6d141e4a5ec76217922cae3d50fbfde63/hovercard\" href=\"https://github.com/mdn/content/commit/86a69ae6d141e4a5ec76217922cae3d50fbfde63\"><tt>86a69ae</tt></a></li>\n<li>Document last modified: 2021-04-08T14:56:01.000Z</li>\n</ul>\n</details>",
            "url": "https://github.com/mdn/content/issues/4713",
            "title": "[hr-time-3] Issue with \"performance.now()\": Chrome, Firefox, and Safari are not spec compliant on certain platforms",
            "date_modified": "2021-05-04T18:23:13.000Z",
            "author": {
                "name": "jonathanmayer",
                "url": "https://github.com/jonathanmayer"
            }
        }
    ]
}