{
    "version": "https://jsonfeed.org/version/1",
    "title": "W3C Web Performance Working Group-relevant MDN issues",
    "home_page_url": "https://dontcallmedom.github.io/mdn-issue-by-spec/w3c_web_performance_working_group.rss",
    "description": "Issue filed on MDN Web Docs related to pages attached to technologies developed by W3C Web Performance Working Group",
    "author": {
        "name": "mdn-issue-by-spec",
        "url": "https://github.com/dontcallmedom/mdn-issue-by-spec"
    },
    "items": [
        {
            "id": "https://github.com/mdn/content/issues/6563",
            "content_html": "<p>MDN URL: <a rel=\"nofollow\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure\">https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure</a></p>\n<h4>What information was incorrect, unhelpful, or incomplete?</h4>\n<p>There is no list of exceptions this function can throw.</p>\n<h4>Specific section or headline?</h4>\n<p>Exceptions</p>\n<h4>What did you expect to see?</h4>\n<p>Documentation of the exceptions this function can throw.</p>\n<h4>Did you test this? If so, how?</h4>\n<div class=\"snippet-clipboard-content position-relative\" data-snippet-clipboard-copy-content=\"performance.measure(&quot;somename&quot;, &quot;mark_that_does_not_exist&quot;);\n\"><pre><code>performance.measure(\"somename\", \"mark_that_does_not_exist\");\n</code></pre></div>\n\n<details>\n<summary>MDN Content page report details</summary>\n<ul>\n<li>Folder: <code>en-us/web/api/performance/measure</code></li>\n<li>MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure</a></li>\n<li>GitHub URL: <a href=\"https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/measure/index.html\">https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/measure/index.html</a></li>\n<li>Last commit: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/mdn/content/commit/e5c00d7f90e16029d1c96e7541aac3a9d1a09a31/hovercard\" href=\"https://github.com/mdn/content/commit/e5c00d7f90e16029d1c96e7541aac3a9d1a09a31\"><tt>e5c00d7</tt></a></li>\n<li>Document last modified: 2021-06-15T07:53:19.000Z</li>\n</ul>\n</details>",
            "url": "https://github.com/mdn/content/issues/6563",
            "title": "[user-timing-2] Issue with \"performance.measure()\": missing note about DOMException: \"An invalid or illegal string was specified\"",
            "date_modified": "2021-07-03T18:50:22.000Z",
            "author": {
                "name": "BenLubar",
                "url": "https://github.com/BenLubar"
            }
        },
        {
            "id": "https://github.com/mdn/content/issues/6441",
            "content_html": "<p>MDN URL: <a rel=\"nofollow\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure\">https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure</a></p>\n<h4>What information was incorrect, unhelpful, or incomplete?</h4>\n<p>Missing changes in the latest <a href=\"https://www.w3.org/TR/user-timing-3/#measure-method\" rel=\"nofollow\">User Timing Level 3</a> working draft as implemented by Chrome and Safari.</p>\n<p>In particularly the return of the <code>entry</code> instread of <code>undefined</code>.</p>\n<p>While nothing is incorrect here, it could be more helpful by mentioning the differences. If you just glance at the article and try it out in a Chrome or Safari console, it's easy to implement something that doesn't work in all browsers.</p>\n<h4>Specific section or headline?</h4>\n<p>Generally the whole thing, in particular the 'Specifications' and 'Compatibility' sections</p>\n<h4>What did you expect to see?</h4>\n<p>A mention of the latest spec/implementations and how it differs accross browsers.</p>\n<h4>Did you test this? If so, how?</h4>\n<p>Checked the latest specification text. Also confirmed the new version is implemented in Chrome 92 and Safari 14.1.</p>\n\n<details>\n<summary>MDN Content page report details</summary>\n<ul>\n<li>Folder: <code>en-us/web/api/performance/measure</code></li>\n<li>MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure</a></li>\n<li>GitHub URL: <a href=\"https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/measure/index.html\">https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/measure/index.html</a></li>\n<li>Last commit: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/mdn/content/commit/e5c00d7f90e16029d1c96e7541aac3a9d1a09a31/hovercard\" href=\"https://github.com/mdn/content/commit/e5c00d7f90e16029d1c96e7541aac3a9d1a09a31\"><tt>e5c00d7</tt></a></li>\n<li>Document last modified: 2021-06-15T07:53:19.000Z</li>\n</ul>\n</details>",
            "url": "https://github.com/mdn/content/issues/6441",
            "title": "[user-timing-2] Issue with \"performance.measure()\": (short summary here please)",
            "date_modified": "2021-06-29T03:24:17.000Z",
            "author": {
                "name": "adam-h",
                "url": "https://github.com/adam-h"
            }
        },
        {
            "id": "https://github.com/mdn/content/issues/4713",
            "content_html": "<p>MDN URL: <a rel=\"nofollow\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Performance/now\">https://developer.mozilla.org/en-US/docs/Web/API/Performance/now</a></p>\n<p>I've edited this issue a number of times, because monotonic timing in browsers is a <em>deep</em> rabbit hole of standards, implementations, operating system clock APIs, and clock hardware (see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"877952957\" data-permission-text=\"Title is private\" data-url=\"https://github.com/w3c/hr-time/issues/115\" data-hovercard-type=\"issue\" data-hovercard-url=\"/w3c/hr-time/issues/115/hovercard\" href=\"https://github.com/w3c/hr-time/issues/115\">w3c/hr-time#115</a>). The material below attempts to accurately and concisely document current browser behavior.</p>\n<h4>What information was incorrect, unhelpful, or incomplete?</h4>\n<p>There are several components of the documentation that are outdated or incomplete.</p>\n<h5>High Resolution Time vs. High Resolution Time Level 2</h5>\n<p>The semantics of <code>performance.now()</code> changed from the original High Resolution Time spec to the Level 2 spec. In the original spec, <code>performance.now()</code> was relative to <code>performance.timing.navigationStart</code> from the Navigation Timing spec. In the Level 2 spec, <code>performance.now()</code> is relative to <code>performance.timeOrigin</code>, which is defined in the spec.</p>\n<p>There are two key differences between these reference times.</p>\n<ol>\n<li>The triggering conditions for <code>navigationStart</code> and <code>timeOrigin</code> are a little different. <code>navigationStart</code> timestamps a document fetch or an unload prompt (if any), while <code>timeOrigin</code> timestamps creation of the browsing context (if no prior document), an unload prompt (if any), or the start of navigation (as defined by the HTML spec, which is a few steps before fetch).</li>\n<li><code>navigationStart</code> is set with the system clock, which might not be monotonic and might not be consistent across navigation events. <code>timeOrigin</code>, by contrast, is set with a shared monotonic clock that is defined to be monotonic, consistent across globals, and initially synced to the system clock (e.g., on browser startup). These properties means that comparing timestamps across webpages with the original spec (<code>performance.timing.navigationStart + performance.now()</code>) has clock change risks, while comparing timestamps across webpages with the Level 2 spec (<code>performance.timeOrigin + performance.now()</code>) doesn't have clock change risks.</li>\n</ol>\n<h5>Ticking During Sleep</h5>\n<p>The original High Resolution Time spec does not address whether <code>performance.now()</code> should tick during sleep. There was consensus for the Level 2 spec that <code>performance.now()</code> should tick during sleep (see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"430536011\" data-permission-text=\"Title is private\" data-url=\"https://github.com/w3c/hr-time/issues/65\" data-hovercard-type=\"issue\" data-hovercard-url=\"/w3c/hr-time/issues/65/hovercard\" href=\"https://github.com/w3c/hr-time/issues/65\">w3c/hr-time#65</a>), but the text of the spec is somewhat ambiguous about sleep behavior and whether that's a normative requirement (see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"877952957\" data-permission-text=\"Title is private\" data-url=\"https://github.com/w3c/hr-time/issues/115\" data-hovercard-type=\"issue\" data-hovercard-url=\"/w3c/hr-time/issues/115/hovercard\" href=\"https://github.com/w3c/hr-time/issues/115\">w3c/hr-time#115</a>).</p>\n<p>Here's a summary table of how browsers appear to currently handle sleep, where <g-emoji class=\"g-emoji\" alias=\"white_check_mark\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/2705.png\">âœ…</g-emoji> means <code>performance.now()</code> keeps ticking and <g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji> means it doesn't.</p>\n<table role=\"table\">\n<thead>\n<tr>\n<th></th>\n<th>Chrome/Chromium (<a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=1206450\" rel=\"nofollow\">bug</a>)</th>\n<th>Firefox (<a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1709767\" rel=\"nofollow\">bug</a>)</th>\n<th>Safari/WebKit (<a href=\"https://bugs.webkit.org/show_bug.cgi?id=225610\" rel=\"nofollow\">bug</a>)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Windows</strong></td>\n<td><g-emoji class=\"g-emoji\" alias=\"white_check_mark\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/2705.png\">âœ…</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"white_check_mark\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/2705.png\">âœ…</g-emoji></td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><strong>macOS</strong></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n</tr>\n<tr>\n<td><strong>Linux</strong></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji> (except maybe WebKitGTK?)</td>\n</tr>\n<tr>\n<td><strong>Android</strong></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><strong>iOS</strong></td>\n<td>N/A (WebKit wrapper)</td>\n<td>N/A (WebKit wrapper)</td>\n<td><g-emoji class=\"g-emoji\" alias=\"no_entry_sign\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png\">ðŸš«</g-emoji></td>\n</tr>\n</tbody>\n</table>\n<h5>performance.timeOrigin in Chrome and Firefox</h5>\n<p>There is currently a <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=1207386\" rel=\"nofollow\">bug</a> in Chrome where <code>performance.timeOrigin</code> is set for each global with the system clock rather than a shared monotonic clock. As a result, comparing High Resolution Time Level 2 timestamps across webpages in Chrome has clock change risks.</p>\n<p>There is also currently a <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1710762\" rel=\"nofollow\">bug</a> in Firefox where <code>performance.timeOrigin</code> is set with a monotonic clock that is synced to the system clock once per process, rather than with a shared monotonic clock that is synced to the system clock once on browser startup. The result is the same: comparing High Resolution Time Level 2 timestamps across webpages in Firefox has clock change risks.</p>\n<h4>Clock Drift on macOS</h4>\n<p>The current macOS implementation of <code>performance.now()</code> in Chrome/Chromium, Firefox, and Safari/WebKit uses a monotonic clock that does not allow for even small, monotonic adjustments (e.g., NTP oscillator corrections). The result can be clock drift between the system clock and High Resolution Time monotonic clocks. Chrome has a <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=948384\" rel=\"nofollow\">bug</a> open on this issue.</p>\n<h4>Specific section or headline?</h4>\n<p>This content probably belongs in the general description of <code>performance.now()</code> because of the significant consequences. Components might also belong on the <code>performance.timeOrigin</code> and <code>DOMHighResTimeStamp</code> pages.</p>\n<h4>What did you expect to see?</h4>\n<ul>\n<li>The description is for High Resolution Time Level 2, but the example is for the original spec (referencing <code>performance.timing.navigationStart</code>). The page should probably include a description for both versions of the spec, examples for both versions of the spec, and an explanation of how the two versions differ, since the changes are subtle and Safari/WebKit hasn't implemented Level 2 yet.</li>\n<li>A description of the browser- and platform-specific inconsistencies in sleep behavior, and what that could mean for use cases.</li>\n<li>A mention of the Chrome and Firefox <code>performance.timeOrigin</code> bugs, and what those could mean for use cases.</li>\n<li>A mention of the High Resolution Time clock drift behavior on macOS, and what that could mean for use cases.</li>\n<li>An explicit indication that, while Safari/WebKit does support <code>performance.now()</code>, it has implemented the original High Resolution Time semantics and not the High Resolution Time Level 2 semantics.</li>\n<li>Further explanation of the High Resolution Time Level 2 shared monotonic clock and per-document monotonic clock concepts would be valuable.</li>\n</ul>\n<h4>Did you test this? If so, how?</h4>\n<p>I've confirmed the following behaviors with both testing and code review:</p>\n<ul>\n<li>Ticking During Sleep\n<ul>\n<li>Chrome: Windows, macOS, Linux</li>\n<li>Firefox: Windows, macOS, Linux</li>\n<li>Safari: macOS</li>\n</ul>\n</li>\n<li>Time Origin Set with the System Clock\n<ul>\n<li>Chrome: macOS and Linux</li>\n<li>Firefox: macOS and Linux</li>\n</ul>\n</li>\n<li>Clock Drift on macOS\n<ul>\n<li>Chrome: macOS</li>\n<li>Firefox: macOS</li>\n<li>Safari: macOS</li>\n</ul>\n</li>\n</ul>\n\n<details>\n<summary>MDN Content page report details</summary>\n<ul>\n<li>Folder: <code>en-us/web/api/performance/now</code></li>\n<li>MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Performance/now\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Performance/now</a></li>\n<li>GitHub URL: <a href=\"https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/now/index.html\">https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/now/index.html</a></li>\n<li>Last commit: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/mdn/content/commit/86a69ae6d141e4a5ec76217922cae3d50fbfde63/hovercard\" href=\"https://github.com/mdn/content/commit/86a69ae6d141e4a5ec76217922cae3d50fbfde63\"><tt>86a69ae</tt></a></li>\n<li>Document last modified: 2021-04-08T14:56:01.000Z</li>\n</ul>\n</details>",
            "url": "https://github.com/mdn/content/issues/4713",
            "title": "[hr-time-3] Issue with \"performance.now()\": Chrome, Firefox, and Safari are not spec compliant on certain platforms",
            "date_modified": "2021-05-04T18:23:13.000Z",
            "author": {
                "name": "jonathanmayer",
                "url": "https://github.com/jonathanmayer"
            }
        },
        {
            "id": "https://github.com/mdn/content/issues/1463",
            "content_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/jakub-g/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jakub-g\">@jakub-g</a> commented on <a href=\"https://github.com/mdn/sprints/issues/3842\" data-hovercard-type=\"issue\" data-hovercard-url=\"/mdn/sprints/issues/3842/hovercard\">Mon Oct 26 2020</a></p>\n<p><em>This is more a generic MDN request than compat report (not sure if it's best repo to report it?)</em></p>\n<p>Chrome 78 (and Safari TP115) shipped User Timing Level 3, which:</p>\n<ul>\n<li>allows passing a second param to <code>performance.mark</code> calls</li>\n<li>makes perf.mark calls return an object</li>\n</ul>\n<p>This could be reflected in the article on perf.mark and compat data:<br>\n<a rel=\"nofollow\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Performance/mark\">https://developer.mozilla.org/en-US/docs/Web/API/Performance/mark</a></p>\n<h1>Example</h1>\n<div class=\"snippet-clipboard-content position-relative\" data-snippet-clipboard-copy-content=\"var mark = performance.mark('myMark', {startTime: 1234});\nperformance.getEntriesByName('myMark')[0].startTime // 1234\ntypeof mark // &quot;object&quot;\nmark.constructor.name // &quot;PerformanceMark&quot;\nmark.startTime // 1234\n\"><pre><code>var mark = performance.mark('myMark', {startTime: 1234});\nperformance.getEntriesByName('myMark')[0].startTime // 1234\ntypeof mark // \"object\"\nmark.constructor.name // \"PerformanceMark\"\nmark.startTime // 1234\n</code></pre></div>\n<h1>Resources</h1>\n<ul>\n<li><a href=\"https://www.chromestatus.com/feature/5149401886490624\" rel=\"nofollow\">https://www.chromestatus.com/feature/5149401886490624</a></li>\n<li><a href=\"https://webkit.org/blog/11333/release-notes-for-safari-technology-preview-115/\" rel=\"nofollow\">https://webkit.org/blog/11333/release-notes-for-safari-technology-preview-115/</a></li>\n<li><a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1581705\" rel=\"nofollow\">https://bugzilla.mozilla.org/show_bug.cgi?id=1581705</a></li>\n</ul>\n<hr>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/ddbeck/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ddbeck\">@ddbeck</a> commented on <a href=\"https://github.com/mdn/sprints/issues/3842#issuecomment-718753798\" data-hovercard-type=\"issue\" data-hovercard-url=\"/mdn/sprints/issues/3842/hovercard\">Thu Oct 29 2020</a></p>\n<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/jakub-g/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jakub-g\">@jakub-g</a>, thanks for opening this PR. The narrow question of updating the compat data will (eventually) get handled here, but the broader content issues belong on mdn/sprints. With that in mind, I'm going to transfer the issue there. Thanks again!</p>",
            "url": "https://github.com/mdn/content/issues/1463",
            "title": "[user-timing-2] Update `performance.mark` article with User Timing Level 3 data",
            "date_modified": "2021-01-18T15:52:43.000Z",
            "author": {
                "name": "chrisdavidmills",
                "url": "https://github.com/chrisdavidmills"
            }
        }
    ]
}