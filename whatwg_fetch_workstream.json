{
    "version": "https://jsonfeed.org/version/1",
    "title": "WHATWG Fetch Workstream-relevant MDN issues",
    "home_page_url": "https://dontcallmedom.github.io/mdn-issue-by-spec/whatwg_fetch_workstream.rss",
    "description": "Issue filed on MDN Web Docs related to pages attached to technologies developed by WHATWG Fetch Workstream",
    "author": {
        "name": "mdn-issue-by-spec",
        "url": "https://github.com/dontcallmedom/mdn-issue-by-spec"
    },
    "items": [
        {
            "id": "https://github.com/mdn/content/issues/21550",
            "content_html": "<h3 dir=\"auto\">MDN URL</h3>\n<p dir=\"auto\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Response</a></p>\n<h3 dir=\"auto\">What specific section or headline is this issue about?</h3>\n<p dir=\"auto\">Response.json</p>\n<h3 dir=\"auto\">What information was incorrect, unhelpful, or incomplete?</h3>\n<p dir=\"auto\">Only the non static <code class=\"notranslate\">Response.json()</code> method is mentioned, but not the static one</p>\n<h3 dir=\"auto\">What did you expect to see?</h3>\n<p dir=\"auto\">A <code class=\"notranslate\">Response.json()</code> page explaining what it does. And an extra entry in the compatibility table.<br>\nCurrently it is only supported in Edge and  Chrome as far as I can tell.</p>\n<h3 dir=\"auto\">Do you have any supporting links, references, or citations?</h3>\n<p dir=\"auto\"><a href=\"https://fetch.spec.whatwg.org/#ref-for-dom-response-json\" rel=\"nofollow\">https://fetch.spec.whatwg.org/#ref-for-dom-response-json</a></p>\n<h3 dir=\"auto\">Do you have anything more you want to share?</h3>\n<p dir=\"auto\"><em>No response</em></p>\n<h3 dir=\"auto\">MDN metadata</h3>\n\n<details>\n<summary>Page report details</summary>\n<ul dir=\"auto\">\n<li>Folder: <code class=\"notranslate\">en-us/web/api/response</code></li>\n<li>MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Response</a></li>\n<li>GitHub URL: <a href=\"https://github.com/mdn/content/blob/main/files/en-us/web/api/response/index.md\">https://github.com/mdn/content/blob/main/files/en-us/web/api/response/index.md</a></li>\n<li>Last commit: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/mdn/content/commit/06105598d11001e9f12d80ad05087f1df3c0634b/hovercard\" href=\"https://github.com/mdn/content/commit/06105598d11001e9f12d80ad05087f1df3c0634b\"><tt>0610559</tt></a></li>\n<li>Document last modified: 2022-10-10T09:00:13.000Z</li>\n</ul>\n</details>",
            "url": "https://github.com/mdn/content/issues/21550",
            "title": "[fetch] Response.json static method is missing",
            "date_modified": "2022-10-14T12:40:47.000Z",
            "author": {
                "name": "jespertheend",
                "url": "https://github.com/jespertheend"
            }
        },
        {
            "id": "https://github.com/mdn/content/issues/17115",
            "content_html": "<h3 dir=\"auto\">MDN URL</h3>\n<p dir=\"auto\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/fetch\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/fetch</a></p>\n<h3 dir=\"auto\">What specific section or headline is this issue about?</h3>\n<p dir=\"auto\">Introduction and \"Exceptions\". At \"Exceptions\", the part about TypeError and the table listing all the reasons for it to happen. I didn't find anything that could justify my results in that list.</p>\n<h3 dir=\"auto\">What information was incorrect, unhelpful, or incomplete?</h3>\n<blockquote>\n<p dir=\"auto\">A <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/fetch\" rel=\"nofollow\">fetch()</a> promise only rejects when a network error is encountered (which is usually when there's a permissions issue or similar). A <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/fetch\" rel=\"nofollow\">fetch()</a> promise does not reject on HTTP errors (404, etc.). Instead, a then() handler must check the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response/ok\" rel=\"nofollow\">Response.ok</a> and/or <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response/status\" rel=\"nofollow\">Response.status</a> properties.</p>\n</blockquote>\n<h3 dir=\"auto\">What did you expect to see?</h3>\n<p dir=\"auto\">I was expecting to trigger the execution of my success callback inside <code class=\"notranslate\">then()</code> since http errors 4xx and 5xx should not reject the fetch promise. Instead, the error callback was executed.</p>\n<p dir=\"auto\">It seems to me that the information in the fetch() and  Fetch API pages are incorrect or outdated. I've made some tests and found that fetch is indeed rejecting promises when 400 status code is returned. I didn't try other error codes.</p>\n<h3 dir=\"auto\">Do you have any supporting links, references, or citations?</h3>\n<p dir=\"auto\"><a href=\"https://stackoverflow.com/questions/45899931/typeerror-failed-to-fetch-trying-to-perform-an-post-request-on-api-hosted-on-he/72552340#72552340\" rel=\"nofollow\">https://stackoverflow.com/questions/45899931/typeerror-failed-to-fetch-trying-to-perform-an-post-request-on-api-hosted-on-he/72552340#72552340</a></p>\n<p dir=\"auto\"><a href=\"https://forum.freecodecamp.org/t/type-error-failed-to-fetch-when-using-fetch-api/456214/5\" rel=\"nofollow\">https://forum.freecodecamp.org/t/type-error-failed-to-fetch-when-using-fetch-api/456214/5</a></p>\n<h3 dir=\"auto\">Do you have anything more you want to share?</h3>\n<p dir=\"auto\">Here is my test:</p>\n<ul dir=\"auto\">\n<li>Setup a server with some POST methods and respective OPTIONS methods to support preflight requests</li>\n<li>Define some required field in the request body. If the request has the field, make your server return 200. Else, return 400.</li>\n<li>Send a request with and without the field and check which callback is fired inside <code class=\"notranslate\">then()</code>.</li>\n</ul>\n<p dir=\"auto\">Request code example:</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  function test_fetch(){\n\t  let message = JSON.stringify({\n             // 'ids' is the expected field. Change it latter for 'id' or something else to see the error.\n             ids: [1] \n\t  })\n  \n\t  fetch('http://your.api/get_data',{\n\t\t  method: 'post',\n                  // Adding Content-Type header to enable preflight. \n                  // It's still not working even with normal(no-preflight) requests.\n                  // To test with normal instead of preflight requests,\n                  // remove the line below from the fetch options object and\n                  // make sure your server can handle text/plain data or else\n                  // you may face some error due to wrong parsing of request body.\n\t\t  headers: {'Content-Type': 'application/json'},\n\t\t  body: message\n\t  })\n\t  .then(data =&gt; console.log('success'),data =&gt; console.log('error'))\n  }\"><pre>  <span class=\"pl-k\">function</span> <span class=\"pl-en\">test_fetch</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n\t  <span class=\"pl-k\">let</span> <span class=\"pl-s1\">message</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">JSON</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">stringify</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">{</span>\n             <span class=\"pl-c\">// 'ids' is the expected field. Change it latter for 'id' or something else to see the error.</span>\n             <span class=\"pl-c1\">ids</span>: <span class=\"pl-kos\">[</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">]</span> \n\t  <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n  \n\t  <span class=\"pl-en\">fetch</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'http://your.api/get_data'</span><span class=\"pl-kos\">,</span><span class=\"pl-kos\">{</span>\n\t\t  <span class=\"pl-c1\">method</span>: <span class=\"pl-s\">'post'</span><span class=\"pl-kos\">,</span>\n                  <span class=\"pl-c\">// Adding Content-Type header to enable preflight. </span>\n                  <span class=\"pl-c\">// It's still not working even with normal(no-preflight) requests.</span>\n                  <span class=\"pl-c\">// To test with normal instead of preflight requests,</span>\n                  <span class=\"pl-c\">// remove the line below from the fetch options object and</span>\n                  <span class=\"pl-c\">// make sure your server can handle text/plain data or else</span>\n                  <span class=\"pl-c\">// you may face some error due to wrong parsing of request body.</span>\n\t\t  <span class=\"pl-c1\">headers</span>: <span class=\"pl-kos\">{</span><span class=\"pl-s\">'Content-Type'</span>: <span class=\"pl-s\">'application/json'</span><span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n\t\t  <span class=\"pl-c1\">body</span>: <span class=\"pl-s1\">message</span>\n\t  <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n\t  <span class=\"pl-kos\">.</span><span class=\"pl-en\">then</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'success'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">data</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'error'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">I've tested in <code class=\"notranslate\">Chrome, version 102.0.5005.61 (Official Build) (64-bit)</code> and <code class=\"notranslate\">Firefox, version 75.0 (64-bit)</code>. Got the same unexpected behaviour in both.</p>\n<h3 dir=\"auto\">MDN metadata</h3>\n\n<details>\n<summary>Page report details</summary>\n<ul dir=\"auto\">\n<li>Folder: <code class=\"notranslate\">en-us/web/api/fetch</code></li>\n<li>MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/fetch\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/fetch</a></li>\n<li>GitHub URL: <a href=\"https://github.com/mdn/content/blob/main/files/en-us/web/api/fetch/index.md\">https://github.com/mdn/content/blob/main/files/en-us/web/api/fetch/index.md</a></li>\n<li>Last commit: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/mdn/content/commit/196cc4ff3068a59b962a3fe1cbb960eb72ef542b/hovercard\" href=\"https://github.com/mdn/content/commit/196cc4ff3068a59b962a3fe1cbb960eb72ef542b\"><tt>196cc4f</tt></a></li>\n<li>Document last modified: 2022-05-31T04:47:00.000Z</li>\n</ul>\n</details>",
            "url": "https://github.com/mdn/content/issues/17115",
            "title": "[fetch] Incorrect or outdated information at fetch() and Fetch API pages",
            "date_modified": "2022-06-08T21:48:36.000Z",
            "author": {
                "name": "jlucartc",
                "url": "https://github.com/jlucartc"
            }
        },
        {
            "id": "https://github.com/mdn/content/issues/13208",
            "content_html": "<p dir=\"auto\">MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response/json\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Response/json</a></p>\n<h4 dir=\"auto\">What information was incorrect, unhelpful, or incomplete?</h4>\n<p dir=\"auto\">This function can raise exceptions, but these are not documented. Try using it on a response that is not actually JSON, e.g.</p>\n<h4 dir=\"auto\">Specific section or headline?</h4>\n<p dir=\"auto\">Exceptions</p>\n<h4 dir=\"auto\">What did you expect to see?</h4>\n<p dir=\"auto\">The list of possible exceptions and their causes. See the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/fetch#exceptions\" rel=\"nofollow\"><code class=\"notranslate\">fetch</code></a> documentation for an example of a function that documents its exceptions well.</p>\n\n<details>\n<summary>MDN Content page report details</summary>\n<ul dir=\"auto\">\n<li>Folder: <code class=\"notranslate\">en-us/web/api/response/json</code></li>\n<li>MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response/json\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Response/json</a></li>\n<li>GitHub URL: <a href=\"https://github.com/mdn/content/blob/main/files/en-us/web/api/response/json/index.md\">https://github.com/mdn/content/blob/main/files/en-us/web/api/response/json/index.md</a></li>\n<li>Last commit: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/mdn/content/commit/93ae23dec42bba9d71d6f1ed45668d8d26847e9c/hovercard\" href=\"https://github.com/mdn/content/commit/93ae23dec42bba9d71d6f1ed45668d8d26847e9c\"><tt>93ae23d</tt></a></li>\n<li>Document last modified: 2022-02-18T09:26:54.000Z</li>\n</ul>\n</details>",
            "url": "https://github.com/mdn/content/issues/13208",
            "title": "[fetch] Issue with \"Response.json()\": Possible exceptions not documented",
            "date_modified": "2022-02-22T13:11:28.000Z",
            "author": {
                "name": "alexschrod",
                "url": "https://github.com/alexschrod"
            }
        },
        {
            "id": "https://github.com/mdn/content/issues/13063",
            "content_html": "<h2 dir=\"auto\">What page(s) did you find the problem on?</h2>\n<ul dir=\"auto\">\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials</a></li>\n</ul>\n<h2 dir=\"auto\">Specific page section or heading?</h2>\n<ul dir=\"auto\">\n<li>Under Syntax &gt; Value for the request credentials page</li>\n<li>The intro text for the Access-Control-Allow-Credentials page</li>\n</ul>\n<h2 dir=\"auto\">What is the problem?</h2>\n<p dir=\"auto\">There are a few problems:</p>\n<ol dir=\"auto\">\n<li>Explanation on credentials weren't accurate because Authorisation headers were sent regardless whether 'credentials' were set to <code class=\"notranslate\">omit</code>, <code class=\"notranslate\">same-origin</code>, or <code class=\"notranslate\">include</code>.</li>\n</ol>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://user-images.githubusercontent.com/3607637/154285142-f0198862-7534-4f13-8cd8-1634f4ea7ddd.png\"><img src=\"https://user-images.githubusercontent.com/3607637/154285142-f0198862-7534-4f13-8cd8-1634f4ea7ddd.png\" alt=\"FLsiY4PVQAIMy9r\" style=\"max-width: 100%;\"></a></p>\n<ol start=\"2\" dir=\"auto\">\n<li>The <code class=\"notranslate\">Access-Control-Allow-Credentials</code> page mentioned that credentials are cookies, authorization headers, or TLS client certificates.</li>\n</ol>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://user-images.githubusercontent.com/3607637/154286505-56304bc9-ee6b-4d49-ae71-1efaa7b6b3c9.png\"><img src=\"https://user-images.githubusercontent.com/3607637/154286505-56304bc9-ee6b-4d49-ae71-1efaa7b6b3c9.png\" alt=\"CleanShot 2022-02-16 at 22 34 26\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">A few things here:</p>\n<ol dir=\"auto\">\n<li><code class=\"notranslate\">Access-Control-Allow-Credentials</code> are not required for Authorization headers. They can be sent regardless whether <code class=\"notranslate\">Access-Control-Allow-Credentials</code> is present.</li>\n<li>Authorization headers only need <code class=\"notranslate\">Authorization</code> to be included <code class=\"notranslate\">Access-Control-Allowed-Headers</code>.</li>\n<li><code class=\"notranslate\">Access-Control-Allow-Credentials</code> are not required to send cookies between domains and subdomains. This is not listed anywhere but I thought it'll be good to make things clear.</li>\n</ol>\n<h2 dir=\"auto\">What did you expect to see?</h2>\n<p dir=\"auto\">Three things:</p>\n<ol dir=\"auto\">\n<li>I recommend removing \"basic http auth\" from the request credentials page since it doesn't look correct.</li>\n<li>I recommend updating the pages to reflect a more accurate understanding for Access-Control-Allow-Credentials. Not sure what to update at this point, but I can take a stab at it.</li>\n<li>Maybe we can point the \"etc\" part in Request Credentials page to the Access-Control-Allow-Credentials page because they seem linked. I'm not sure whether this is accurate though.</li>\n</ol>\n<h2 dir=\"auto\">Did you test this? If so, how?</h2>\n<p dir=\"auto\">I tested <code class=\"notranslate\">credentials</code> and wrote <a href=\"https://zellwk.com/blog/how-fetch-credentials-handles-cookies/\" rel=\"nofollow\">an article</a> about my tests. I focused on cookies in this article and didn't include the Authorization header parts. There's a test repository included in the article. I can create a test repo for the authorization part if necessary. Just let me know.</p>",
            "url": "https://github.com/mdn/content/issues/13063",
            "title": "[fetch] Content bug: Inaccurate explanation on request credentials",
            "date_modified": "2022-02-17T09:18:12.000Z",
            "author": {
                "name": "zellwk",
                "url": "https://github.com/zellwk"
            }
        },
        {
            "id": "https://github.com/mdn/content/issues/12852",
            "content_html": "<p dir=\"auto\">MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response/error\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Response/error</a></p>\n<h4 dir=\"auto\">What information was incorrect, unhelpful, or incomplete?</h4>\n<p dir=\"auto\">The example says <code class=\"notranslate\">TBD (does not yet appear to be supported anywhere).</code> But under support it has full support (excl IE, but thats a given)</p>\n<h4 dir=\"auto\">Specific section or headline?</h4>\n<p dir=\"auto\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response/error#example\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Response/error#example</a></p>\n<h4 dir=\"auto\">What did you expect to see?</h4>\n<p dir=\"auto\">One of your usual very helpful examples. The description is great for understanding, but if one is not very good at JavaScript, the example really helps one to use the object with the right syntax.</p>\n<p dir=\"auto\">Well done for the brillant reference you have!</p>\n\n<details>\n<summary>MDN Content page report details</summary>\n<ul dir=\"auto\">\n<li>Folder: <code class=\"notranslate\">en-us/web/api/response/error</code></li>\n<li>MDN URL: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response/error\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/Response/error</a></li>\n<li>GitHub URL: <a href=\"https://github.com/mdn/content/blob/main/files/en-us/web/api/response/error/index.md\">https://github.com/mdn/content/blob/main/files/en-us/web/api/response/error/index.md</a></li>\n<li>Last commit: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/mdn/content/commit/4072b1033d73e9d7ee8ff6290f24057fc97e8a58/hovercard\" href=\"https://github.com/mdn/content/commit/4072b1033d73e9d7ee8ff6290f24057fc97e8a58\"><tt>4072b10</tt></a></li>\n<li>Document last modified: 2021-11-09T06:44:18.000Z</li>\n</ul>\n</details>",
            "url": "https://github.com/mdn/content/issues/12852",
            "title": "[fetch] Issue with \"Response.error()\": Example missing",
            "date_modified": "2022-02-09T07:32:59.000Z",
            "author": {
                "name": "mangelozzi",
                "url": "https://github.com/mangelozzi"
            }
        }
    ]
}