<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>W3C Web Performance Working Group-relevant MDN issues</title>
        <link>https://dontcallmedom.github.io/mdn-issue-by-spec/w3c_web_performance_working_group.rss</link>
        <description>Issue filed on MDN Web Docs related to pages attached to technologies developed by W3C Web Performance Working Group</description>
        <lastBuildDate>Thu, 01 Jul 2021 12:05:43 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[[page-visibility-2] Issue with "Document: visibilitychange event": Support by Chrome needs updating]]></title>
            <link>https://github.com/mdn/content/issues/6492</link>
            <guid>https://github.com/mdn/content/issues/6492</guid>
            <pubDate>Thu, 01 Jul 2021 12:05:43 GMT</pubDate>
            <content:encoded><![CDATA[<p>MDN URL: <a rel="nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilitychange_event">https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilitychange_event</a></p>
<h4>What information was incorrect, unhelpful, or incomplete?</h4>
<blockquote>
<p>This event fires with a visibilityState of hidden when a user <strong>navigates to a new page</strong>, switches tabs, closes the tab, minimizes or closes the browser, or, on mobile, switches from the browser to a different app. Transitioning to hidden is the last event that's reliably observable by the page, so developers should treat it as the likely end of the user's session (for example, for sending analytics data).<br>
This section outlines the event should fire when a user navigates to a new page, however this behaviour is not observed by chrome.</p>
</blockquote>
<h4>Specific section or headline?</h4>
<p>The specific mention of the event firing when a user navigates to a new page.</p>
<h4>What did you expect to see?</h4>
<p>The docs should be changed to reflect the fact that chrome supports the event, but does not fire this (nor pagehidden), when a user navigates away from a site.</p>
<h4>Did you test this? If so, how?</h4>
<p>Added an event listener for the visibilitychange event and noticed it does not fire on navigation away. Checked behaviour on Firefox and Safari as well. Firefox fires the event in this scenario, Safari does not. This matches what is outlined in the Browser Compatibility table for both</p>

<details>
<summary>MDN Content page report details</summary>
<ul>
<li>Folder: <code>en-us/web/api/document/visibilitychange_event</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilitychange_event" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilitychange_event</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/document/visibilitychange_event/index.html">https://github.com/mdn/content/blob/main/files/en-us/web/api/document/visibilitychange_event/index.html</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/08ffa1cfe66b247c7ee41b6ea0f36d82fb61b519/hovercard" href="https://github.com/mdn/content/commit/08ffa1cfe66b247c7ee41b6ea0f36d82fb61b519"><tt>08ffa1c</tt></a></li>
<li>Document last modified: 2021-06-12T21:13:26.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[user-timing-2] Issue with "performance.measure()": (short summary here please)]]></title>
            <link>https://github.com/mdn/content/issues/6441</link>
            <guid>https://github.com/mdn/content/issues/6441</guid>
            <pubDate>Tue, 29 Jun 2021 03:24:17 GMT</pubDate>
            <content:encoded><![CDATA[<p>MDN URL: <a rel="nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure">https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure</a></p>
<h4>What information was incorrect, unhelpful, or incomplete?</h4>
<p>Missing changes in the latest <a href="https://www.w3.org/TR/user-timing-3/#measure-method" rel="nofollow">User Timing Level 3</a> working draft as implemented by Chrome and Safari.</p>
<p>In particularly the return of the <code>entry</code> instread of <code>undefined</code>.</p>
<p>While nothing is incorrect here, it could be more helpful by mentioning the differences. If you just glance at the article and try it out in a Chrome or Safari console, it's easy to implement something that doesn't work in all browsers.</p>
<h4>Specific section or headline?</h4>
<p>Generally the whole thing, in particular the 'Specifications' and 'Compatibility' sections</p>
<h4>What did you expect to see?</h4>
<p>A mention of the latest spec/implementations and how it differs accross browsers.</p>
<h4>Did you test this? If so, how?</h4>
<p>Checked the latest specification text. Also confirmed the new version is implemented in Chrome 92 and Safari 14.1.</p>

<details>
<summary>MDN Content page report details</summary>
<ul>
<li>Folder: <code>en-us/web/api/performance/measure</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/measure/index.html">https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/measure/index.html</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/e5c00d7f90e16029d1c96e7541aac3a9d1a09a31/hovercard" href="https://github.com/mdn/content/commit/e5c00d7f90e16029d1c96e7541aac3a9d1a09a31"><tt>e5c00d7</tt></a></li>
<li>Document last modified: 2021-06-15T07:53:19.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[hr-time-3] Issue with "performance.now()": Chrome, Firefox, and Safari are not spec compliant on certain platforms]]></title>
            <link>https://github.com/mdn/content/issues/4713</link>
            <guid>https://github.com/mdn/content/issues/4713</guid>
            <pubDate>Tue, 04 May 2021 18:23:13 GMT</pubDate>
            <content:encoded><![CDATA[<p>MDN URL: <a rel="nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/now">https://developer.mozilla.org/en-US/docs/Web/API/Performance/now</a></p>
<p>I've edited this issue a number of times, because monotonic timing in browsers is a <em>deep</em> rabbit hole of standards, implementations, operating system clock APIs, and clock hardware (see <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="877952957" data-permission-text="Title is private" data-url="https://github.com/w3c/hr-time/issues/115" data-hovercard-type="issue" data-hovercard-url="/w3c/hr-time/issues/115/hovercard" href="https://github.com/w3c/hr-time/issues/115">w3c/hr-time#115</a>). The material below attempts to accurately and concisely document current browser behavior.</p>
<h4>What information was incorrect, unhelpful, or incomplete?</h4>
<p>There are several components of the documentation that are outdated or incomplete.</p>
<h5>High Resolution Time vs. High Resolution Time Level 2</h5>
<p>The semantics of <code>performance.now()</code> changed from the original High Resolution Time spec to the Level 2 spec. In the original spec, <code>performance.now()</code> was relative to <code>performance.timing.navigationStart</code> from the Navigation Timing spec. In the Level 2 spec, <code>performance.now()</code> is relative to <code>performance.timeOrigin</code>, which is defined in the spec.</p>
<p>There are two key differences between these reference times.</p>
<ol>
<li>The triggering conditions for <code>navigationStart</code> and <code>timeOrigin</code> are a little different. <code>navigationStart</code> timestamps a document fetch or an unload prompt (if any), while <code>timeOrigin</code> timestamps creation of the browsing context (if no prior document), an unload prompt (if any), or the start of navigation (as defined by the HTML spec, which is a few steps before fetch).</li>
<li><code>navigationStart</code> is set with the system clock, which might not be monotonic and might not be consistent across navigation events. <code>timeOrigin</code>, by contrast, is set with a shared monotonic clock that is defined to be monotonic, consistent across globals, and initially synced to the system clock (e.g., on browser startup). These properties means that comparing timestamps across webpages with the original spec (<code>performance.timing.navigationStart + performance.now()</code>) has clock change risks, while comparing timestamps across webpages with the Level 2 spec (<code>performance.timeOrigin + performance.now()</code>) doesn't have clock change risks.</li>
</ol>
<h5>Ticking During Sleep</h5>
<p>The original High Resolution Time spec does not address whether <code>performance.now()</code> should tick during sleep. There was consensus for the Level 2 spec that <code>performance.now()</code> should tick during sleep (see <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="430536011" data-permission-text="Title is private" data-url="https://github.com/w3c/hr-time/issues/65" data-hovercard-type="issue" data-hovercard-url="/w3c/hr-time/issues/65/hovercard" href="https://github.com/w3c/hr-time/issues/65">w3c/hr-time#65</a>), but the text of the spec is somewhat ambiguous about sleep behavior and whether that's a normative requirement (see <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="877952957" data-permission-text="Title is private" data-url="https://github.com/w3c/hr-time/issues/115" data-hovercard-type="issue" data-hovercard-url="/w3c/hr-time/issues/115/hovercard" href="https://github.com/w3c/hr-time/issues/115">w3c/hr-time#115</a>).</p>
<p>Here's a summary table of how browsers appear to currently handle sleep, where <g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji> means <code>performance.now()</code> keeps ticking and <g-emoji class="g-emoji" alias="no_entry_sign" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png">🚫</g-emoji> means it doesn't.</p>
<table role="table">
<thead>
<tr>
<th></th>
<th>Chrome/Chromium (<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1206450" rel="nofollow">bug</a>)</th>
<th>Firefox (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1709767" rel="nofollow">bug</a>)</th>
<th>Safari/WebKit (<a href="https://bugs.webkit.org/show_bug.cgi?id=225610" rel="nofollow">bug</a>)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Windows</strong></td>
<td><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji></td>
<td><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji></td>
<td>N/A</td>
</tr>
<tr>
<td><strong>macOS</strong></td>
<td><g-emoji class="g-emoji" alias="no_entry_sign" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png">🚫</g-emoji></td>
<td><g-emoji class="g-emoji" alias="no_entry_sign" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png">🚫</g-emoji></td>
<td><g-emoji class="g-emoji" alias="no_entry_sign" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png">🚫</g-emoji></td>
</tr>
<tr>
<td><strong>Linux</strong></td>
<td><g-emoji class="g-emoji" alias="no_entry_sign" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png">🚫</g-emoji></td>
<td><g-emoji class="g-emoji" alias="no_entry_sign" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png">🚫</g-emoji></td>
<td><g-emoji class="g-emoji" alias="no_entry_sign" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png">🚫</g-emoji> (except maybe WebKitGTK?)</td>
</tr>
<tr>
<td><strong>Android</strong></td>
<td><g-emoji class="g-emoji" alias="no_entry_sign" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png">🚫</g-emoji></td>
<td><g-emoji class="g-emoji" alias="no_entry_sign" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png">🚫</g-emoji></td>
<td>N/A</td>
</tr>
<tr>
<td><strong>iOS</strong></td>
<td>N/A (WebKit wrapper)</td>
<td>N/A (WebKit wrapper)</td>
<td><g-emoji class="g-emoji" alias="no_entry_sign" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png">🚫</g-emoji></td>
</tr>
</tbody>
</table>
<h5>performance.timeOrigin in Chrome and Firefox</h5>
<p>There is currently a <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1207386" rel="nofollow">bug</a> in Chrome where <code>performance.timeOrigin</code> is set for each global with the system clock rather than a shared monotonic clock. As a result, comparing High Resolution Time Level 2 timestamps across webpages in Chrome has clock change risks.</p>
<p>There is also currently a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1710762" rel="nofollow">bug</a> in Firefox where <code>performance.timeOrigin</code> is set with a monotonic clock that is synced to the system clock once per process, rather than with a shared monotonic clock that is synced to the system clock once on browser startup. The result is the same: comparing High Resolution Time Level 2 timestamps across webpages in Firefox has clock change risks.</p>
<h4>Clock Drift on macOS</h4>
<p>The current macOS implementation of <code>performance.now()</code> in Chrome/Chromium, Firefox, and Safari/WebKit uses a monotonic clock that does not allow for even small, monotonic adjustments (e.g., NTP oscillator corrections). The result can be clock drift between the system clock and High Resolution Time monotonic clocks. Chrome has a <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=948384" rel="nofollow">bug</a> open on this issue.</p>
<h4>Specific section or headline?</h4>
<p>This content probably belongs in the general description of <code>performance.now()</code> because of the significant consequences. Components might also belong on the <code>performance.timeOrigin</code> and <code>DOMHighResTimeStamp</code> pages.</p>
<h4>What did you expect to see?</h4>
<ul>
<li>The description is for High Resolution Time Level 2, but the example is for the original spec (referencing <code>performance.timing.navigationStart</code>). The page should probably include a description for both versions of the spec, examples for both versions of the spec, and an explanation of how the two versions differ, since the changes are subtle and Safari/WebKit hasn't implemented Level 2 yet.</li>
<li>A description of the browser- and platform-specific inconsistencies in sleep behavior, and what that could mean for use cases.</li>
<li>A mention of the Chrome and Firefox <code>performance.timeOrigin</code> bugs, and what those could mean for use cases.</li>
<li>A mention of the High Resolution Time clock drift behavior on macOS, and what that could mean for use cases.</li>
<li>An explicit indication that, while Safari/WebKit does support <code>performance.now()</code>, it has implemented the original High Resolution Time semantics and not the High Resolution Time Level 2 semantics.</li>
<li>Further explanation of the High Resolution Time Level 2 shared monotonic clock and per-document monotonic clock concepts would be valuable.</li>
</ul>
<h4>Did you test this? If so, how?</h4>
<p>I've confirmed the following behaviors with both testing and code review:</p>
<ul>
<li>Ticking During Sleep
<ul>
<li>Chrome: Windows, macOS, Linux</li>
<li>Firefox: Windows, macOS, Linux</li>
<li>Safari: macOS</li>
</ul>
</li>
<li>Time Origin Set with the System Clock
<ul>
<li>Chrome: macOS and Linux</li>
<li>Firefox: macOS and Linux</li>
</ul>
</li>
<li>Clock Drift on macOS
<ul>
<li>Chrome: macOS</li>
<li>Firefox: macOS</li>
<li>Safari: macOS</li>
</ul>
</li>
</ul>

<details>
<summary>MDN Content page report details</summary>
<ul>
<li>Folder: <code>en-us/web/api/performance/now</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/now" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Performance/now</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/now/index.html">https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/now/index.html</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/86a69ae6d141e4a5ec76217922cae3d50fbfde63/hovercard" href="https://github.com/mdn/content/commit/86a69ae6d141e4a5ec76217922cae3d50fbfde63"><tt>86a69ae</tt></a></li>
<li>Document last modified: 2021-04-08T14:56:01.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[user-timing-2] Content update: performance.mark|measure x UserTiming Level 3]]></title>
            <link>https://github.com/mdn/content/issues/3001</link>
            <guid>https://github.com/mdn/content/issues/3001</guid>
            <pubDate>Wed, 10 Mar 2021 14:33:49 GMT</pubDate>
            <content:encoded><![CDATA[<h2>What page(s) did you find the problem on?</h2>
<p><a rel="nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/mark">https://developer.mozilla.org/en-US/docs/Web/API/Performance/mark</a><br>
<a rel="nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure">https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure</a></p>
<h2>Specific page section or heading?</h2>
<ul>
<li>Return value</li>
<li>Specifications</li>
<li>parameters</li>
</ul>
<h2>What is the problem?</h2>
<ul>
<li>New version of spec (UT L3) was released: <a href="https://www.w3.org/TR/user-timing-3/" rel="nofollow">https://www.w3.org/TR/user-timing-3/</a></li>
<li>Shipped in <a href="https://www.chromestatus.com/feature/5149401886490624" rel="nofollow">Chrome 78</a> and will ship soon in <a href="https://webkit.org/blog/11333/release-notes-for-safari-technology-preview-115/" rel="nofollow">Safari 14.1</a>. <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1581705" rel="nofollow">Not yet in Firefox</a></li>
<li>It makes <code>performance.mark|measure</code> return <code>PerformanceMark</code> <code>PerformanceMeasure</code> (and not <code>void</code>)</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/1437027/110644805-c048eb00-81b5-11eb-8e27-250a24166f6c.png"><img src="https://user-images.githubusercontent.com/1437027/110644805-c048eb00-81b5-11eb-8e27-250a24166f6c.png" alt="image" style="max-width:100%;"></a></p>
<ul>
<li><code>perf.mark</code> accepts  <code>startTime</code> param:</li>
</ul>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="      performance.mark('a', {startTime: 900})
      performance.mark('b', {startTime: 999})
      performance.measure('a-&gt;b', 'a', 'b')
"><pre><code>      performance.mark('a', {startTime: 900})
      performance.mark('b', {startTime: 999})
      performance.measure('a-&gt;b', 'a', 'b')
</code></pre></div>
<p><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/1437027/110645601-685eb400-81b6-11eb-89cd-76e38b5c89ca.png"><img src="https://user-images.githubusercontent.com/1437027/110645601-685eb400-81b6-11eb-89cd-76e38b5c89ca.png" alt="image" style="max-width:100%;"></a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[user-timing-2] Update `performance.mark` article with User Timing Level 3 data]]></title>
            <link>https://github.com/mdn/content/issues/1463</link>
            <guid>https://github.com/mdn/content/issues/1463</guid>
            <pubDate>Mon, 18 Jan 2021 15:52:43 GMT</pubDate>
            <content:encoded><![CDATA[<p><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/jakub-g/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakub-g">@jakub-g</a> commented on <a href="https://github.com/mdn/sprints/issues/3842" data-hovercard-type="issue" data-hovercard-url="/mdn/sprints/issues/3842/hovercard">Mon Oct 26 2020</a></p>
<p><em>This is more a generic MDN request than compat report (not sure if it's best repo to report it?)</em></p>
<p>Chrome 78 (and Safari TP115) shipped User Timing Level 3, which:</p>
<ul>
<li>allows passing a second param to <code>performance.mark</code> calls</li>
<li>makes perf.mark calls return an object</li>
</ul>
<p>This could be reflected in the article on perf.mark and compat data:<br>
<a rel="nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/mark">https://developer.mozilla.org/en-US/docs/Web/API/Performance/mark</a></p>
<h1>Example</h1>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="var mark = performance.mark('myMark', {startTime: 1234});
performance.getEntriesByName('myMark')[0].startTime // 1234
typeof mark // &quot;object&quot;
mark.constructor.name // &quot;PerformanceMark&quot;
mark.startTime // 1234
"><pre><code>var mark = performance.mark('myMark', {startTime: 1234});
performance.getEntriesByName('myMark')[0].startTime // 1234
typeof mark // "object"
mark.constructor.name // "PerformanceMark"
mark.startTime // 1234
</code></pre></div>
<h1>Resources</h1>
<ul>
<li><a href="https://www.chromestatus.com/feature/5149401886490624" rel="nofollow">https://www.chromestatus.com/feature/5149401886490624</a></li>
<li><a href="https://webkit.org/blog/11333/release-notes-for-safari-technology-preview-115/" rel="nofollow">https://webkit.org/blog/11333/release-notes-for-safari-technology-preview-115/</a></li>
<li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1581705" rel="nofollow">https://bugzilla.mozilla.org/show_bug.cgi?id=1581705</a></li>
</ul>
<hr>
<p><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/ddbeck/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ddbeck">@ddbeck</a> commented on <a href="https://github.com/mdn/sprints/issues/3842#issuecomment-718753798" data-hovercard-type="issue" data-hovercard-url="/mdn/sprints/issues/3842/hovercard">Thu Oct 29 2020</a></p>
<p>Hi <a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/jakub-g/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakub-g">@jakub-g</a>, thanks for opening this PR. The narrow question of updating the compat data will (eventually) get handled here, but the broader content issues belong on mdn/sprints. With that in mind, I'm going to transfer the issue there. Thanks again!</p>]]></content:encoded>
        </item>
    </channel>
</rss>