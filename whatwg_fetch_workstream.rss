<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>WHATWG Fetch Workstream-relevant MDN issues</title>
        <link>https://dontcallmedom.github.io/mdn-issue-by-spec/whatwg_fetch_workstream.rss</link>
        <description>Issue filed on MDN Web Docs related to pages attached to technologies developed by WHATWG Fetch Workstream</description>
        <lastBuildDate>Fri, 09 Jun 2023 05:38:55 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[[fetch] [Not release] HTTP Access-Control-Allow-Header can't be wildcarded for authorization directive]]></title>
            <link>https://github.com/mdn/content/issues/27230</link>
            <guid>https://github.com/mdn/content/issues/27230</guid>
            <pubDate>Fri, 09 Jun 2023 05:38:55 GMT</pubDate>
            <content:encoded><![CDATA[<h2 dir="auto">Acceptance Criteria</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""> The listed features are documented sufficiently on MDN</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""> BCD is updated</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""> Interactive example and data repos are updated if appropriate</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""> The content has been reviewed as needed</li>
</ul>
<h3 dir="auto">For folks helping with Firefox related documentation</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""> Set bugs to <code class="notranslate">dev-doc-complete</code></li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""> Add entry to Firefox release notes if feature is enabled in release</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""> Add entry to Firefox experimental features page if feature is not yet enabled in release</li>
</ul>
<h2 dir="auto">Features to document</h2>
<p dir="auto">I think we might need to add experimental feature behind <code class="notranslate">pref: network.cors_preflight.authorization_covered_by_wildcard</code></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# When the Access-Control-Allow-Headers is wildcard (*), whether to allow
# CORS-protected requests with the Authorization request header.
- name: network.cors_preflight.authorization_covered_by_wildcard"><pre class="notranslate"><code class="notranslate"># When the Access-Control-Allow-Headers is wildcard (*), whether to allow
# CORS-protected requests with the Authorization request header.
- name: network.cors_preflight.authorization_covered_by_wildcard
</code></pre></div>
<p dir="auto">There is also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1687364#c4" rel="nofollow">https://bugzilla.mozilla.org/show_bug.cgi?id=1687364#c4</a> which indicates we might need to update <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#directives" rel="nofollow">Access-Control-Expose-Headers</a> to remove comments around use of the authorization header.</p>
<p dir="auto">Querying this in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1687364#c41" rel="nofollow">https://bugzilla.mozilla.org/show_bug.cgi?id=1687364#c41</a></p>
<h2 dir="auto">Related Gecko bugs</h2>
<p dir="auto"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1687364" rel="nofollow">https://bugzilla.mozilla.org/show_bug.cgi?id=1687364</a></p>
<h2 dir="auto">Other</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox"> Check content open issues to see if any pertain to the subject matter. If there are any that can be closed because of the work, do so. If there are any that can be fixed relatively quickly because of the knowledge from completing this issue and you have time, feel free to go ahead and fix them.</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox"> Check if glossary updates are required for the feature you're documenting - whether an existing term needs to be updated or a new term should be added.</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox"> Check if BCD update means that content pages need to have experimental markup removed or deprecated markup added (front matter tags and macros).</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[fetch] Can't get the example to work.]]></title>
            <link>https://github.com/mdn/content/issues/24728</link>
            <guid>https://github.com/mdn/content/issues/24728</guid>
            <pubDate>Wed, 22 Feb 2023 05:29:58 GMT</pubDate>
            <content:encoded><![CDATA[<h3 dir="auto">MDN URL</h3>
<p dir="auto"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/integrity" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Request/integrity</a></p>
<h3 dir="auto">What specific section or headline is this issue about?</h3>
<p dir="auto">Examples does not work</p>
<h3 dir="auto">What information was incorrect, unhelpful, or incomplete?</h3>
<p dir="auto">According to the example, the below is supposed to work:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="const myRequest = new Request('flowers.jpg');
const myIntegrity = myRequest.integrity;"><pre class="notranslate"><span class="pl-k">const</span> <span class="pl-s1">myRequest</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Request</span><span class="pl-kos">(</span><span class="pl-s">'flowers.jpg'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">myIntegrity</span> <span class="pl-c1">=</span> <span class="pl-s1">myRequest</span><span class="pl-kos">.</span><span class="pl-c1">integrity</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">However, I am unable to get an integrity by referencing a file by URL.<br>
I don't understand how it would be theoretically possible because the integrity according to my understanding is based on the file content which would require an async function execution.</p>
<h3 dir="auto">What did you expect to see?</h3>
<p dir="auto">I expect to see an example that can be easily copied or slightly edited to make work, and any necessary hints where confusion may be likely.</p>
<h3 dir="auto">Do you have any supporting links, references, or citations?</h3>
<p dir="auto"><em>No response</em></p>
<h3 dir="auto">Do you have anything more you want to share?</h3>
<p dir="auto"><em>No response</em></p>
<h3 dir="auto">MDN metadata</h3>

<details>
<summary>Page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/request/integrity</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/integrity" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Request/integrity</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/request/integrity/index.md">https://github.com/mdn/content/blob/main/files/en-us/web/api/request/integrity/index.md</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/2937558d5ed1e03d7f60b2de71dd9c17f490166e/hovercard" href="https://github.com/mdn/content/commit/2937558d5ed1e03d7f60b2de71dd9c17f490166e"><tt>2937558</tt></a></li>
<li>Document last modified: 2023-02-19T10:03:58.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[fetch] `Response.text()` can throw a `TypeError`]]></title>
            <link>https://github.com/mdn/content/issues/24466</link>
            <guid>https://github.com/mdn/content/issues/24466</guid>
            <pubDate>Wed, 15 Feb 2023 16:35:17 GMT</pubDate>
            <content:encoded><![CDATA[<h3 dir="auto">MDN URL</h3>
<p dir="auto"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/text" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Response/text</a></p>
<h3 dir="auto">What specific section or headline is this issue about?</h3>
<p dir="auto">Return value</p>
<h3 dir="auto">What information was incorrect, unhelpful, or incomplete?</h3>
<p dir="auto">It says that it returns "A Promise that resolves with a String."<br>
But in reality it's possible for this promise to reject with a TypeError.</p>
<h3 dir="auto">What did you expect to see?</h3>
<p dir="auto">Mentioning of the rejected promise similar to what's shown at <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch#exceptions" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/fetch#exceptions</a></p>
<h3 dir="auto">Do you have any supporting links, references, or citations?</h3>
<p dir="auto"><a href="https://fetch.spec.whatwg.org/#concept-body-consume-body" rel="nofollow">https://fetch.spec.whatwg.org/#concept-body-consume-body</a> mentions:</p>
<blockquote>
<p dir="auto">If object is <a href="https://fetch.spec.whatwg.org/#body-unusable" rel="nofollow">unusable</a>, then return <a href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" rel="nofollow">a promise rejected with</a> a <a href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" rel="nofollow">TypeError</a>.</p>
</blockquote>
<p dir="auto">which is called by <a href="https://fetch.spec.whatwg.org/#dom-body-text" rel="nofollow">https://fetch.spec.whatwg.org/#dom-body-text</a></p>
<h3 dir="auto">Do you have anything more you want to share?</h3>
<ul dir="auto">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/arrayBuffer" rel="nofollow"><code class="notranslate">Response.arrayBuffer()</code></a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/blob" rel="nofollow"><code class="notranslate">Response.blob()</code></a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/formData" rel="nofollow"><code class="notranslate">Response.formData()</code></a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/json" rel="nofollow"><code class="notranslate">Response.json()</code></a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/text" rel="nofollow"><code class="notranslate">Response.text()</code></a></li>
</ul>
<p dir="auto">all refer to <a href="https://fetch.spec.whatwg.org/#concept-body-consume-body" rel="nofollow"><code class="notranslate">consume body</code></a> in the spec, and would benefit from similar documentation.</p>
<h3 dir="auto">MDN metadata</h3>

<details>
<summary>Page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/response/text</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/text" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Response/text</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/response/text/index.md">https://github.com/mdn/content/blob/main/files/en-us/web/api/response/text/index.md</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/16e398809d62247dbadc89ff4024a0ffa4781f0e/hovercard" href="https://github.com/mdn/content/commit/16e398809d62247dbadc89ff4024a0ffa4781f0e"><tt>16e3988</tt></a></li>
<li>Document last modified: 2022-09-13T06:27:50.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[fetch] Spec update: `response.body` now returns readable byte stream]]></title>
            <link>https://github.com/mdn/content/issues/24453</link>
            <guid>https://github.com/mdn/content/issues/24453</guid>
            <pubDate>Wed, 15 Feb 2023 10:53:31 GMT</pubDate>
            <content:encoded><![CDATA[<h3 dir="auto">MDN URL</h3>
<p dir="auto"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/body" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Response/body</a></p>
<h3 dir="auto">What specific section or headline is this issue about?</h3>
<p dir="auto">Value?</p>
<h3 dir="auto">What information was incorrect, unhelpful, or incomplete?</h3>
<p dir="auto">No mention about what stream type <code class="notranslate">Response.body</code> returns.</p>
<h3 dir="auto">What did you expect to see?</h3>
<p dir="auto">It would be helpful to show it returns readable byte stream and thus one can also call <code class="notranslate">.getReader({ mode: "byob" })</code> instead of <code class="notranslate">.getReader()</code> to get the bytes from Response.</p>
<h3 dir="auto">Do you have any supporting links, references, or citations?</h3>
<p dir="auto">We are updating the spec here: <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1531851817" data-permission-text="Title is private" data-url="https://github.com/whatwg/fetch/issues/1593" data-hovercard-type="pull_request" data-hovercard-url="/whatwg/fetch/pull/1593/hovercard" href="https://github.com/whatwg/fetch/pull/1593">whatwg/fetch#1593</a></p>
<h3 dir="auto">Do you have anything more you want to share?</h3>
<p dir="auto">Check whether this is supported on each browser by running <code class="notranslate">new Response("").body.getReader({ mode: "byob" })</code>. It will throw when not supported.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[fetch] "the request's destination. This is a string indicating the type of content being requested."]]></title>
            <link>https://github.com/mdn/content/issues/22955</link>
            <guid>https://github.com/mdn/content/issues/22955</guid>
            <pubDate>Wed, 14 Dec 2022 16:29:26 GMT</pubDate>
            <content:encoded><![CDATA[<h3 dir="auto">MDN URL</h3>
<p dir="auto"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Request</a></p>
<h3 dir="auto">What specific section or headline is this issue about?</h3>
<p dir="auto">Request.destination</p>
<h3 dir="auto">What information was incorrect, unhelpful, or incomplete?</h3>
<p dir="auto">It seems very unlikely that "the request's destination" indicates "the type of content being requested". I suspect this is an error but am unsure.</p>
<h3 dir="auto">What did you expect to see?</h3>
<p dir="auto">Not sure. "destination" doesn't sound like content type but "url" is already the destination.</p>
<h3 dir="auto">Do you have any supporting links, references, or citations?</h3>
<p dir="auto"><em>No response</em></p>
<h3 dir="auto">Do you have anything more you want to share?</h3>
<p dir="auto">Thanks for reading!</p>
<h3 dir="auto">MDN metadata</h3>

<details>
<summary>Page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/request</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Request</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/request/index.md">https://github.com/mdn/content/blob/main/files/en-us/web/api/request/index.md</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/06105598d11001e9f12d80ad05087f1df3c0634b/hovercard" href="https://github.com/mdn/content/commit/06105598d11001e9f12d80ad05087f1df3c0634b"><tt>0610559</tt></a></li>
<li>Document last modified: 2022-10-10T09:00:13.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[fetch] Response.json static method is missing]]></title>
            <link>https://github.com/mdn/content/issues/21550</link>
            <guid>https://github.com/mdn/content/issues/21550</guid>
            <pubDate>Fri, 14 Oct 2022 12:40:47 GMT</pubDate>
            <content:encoded><![CDATA[<h3 dir="auto">MDN URL</h3>
<p dir="auto"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Response</a></p>
<h3 dir="auto">What specific section or headline is this issue about?</h3>
<p dir="auto">Response.json</p>
<h3 dir="auto">What information was incorrect, unhelpful, or incomplete?</h3>
<p dir="auto">Only the non static <code class="notranslate">Response.json()</code> method is mentioned, but not the static one</p>
<h3 dir="auto">What did you expect to see?</h3>
<p dir="auto">A <code class="notranslate">Response.json()</code> page explaining what it does. And an extra entry in the compatibility table.<br>
Currently it is only supported in Edge and  Chrome as far as I can tell.</p>
<h3 dir="auto">Do you have any supporting links, references, or citations?</h3>
<p dir="auto"><a href="https://fetch.spec.whatwg.org/#ref-for-dom-response-json" rel="nofollow">https://fetch.spec.whatwg.org/#ref-for-dom-response-json</a></p>
<h3 dir="auto">Do you have anything more you want to share?</h3>
<p dir="auto"><em>No response</em></p>
<h3 dir="auto">MDN metadata</h3>

<details>
<summary>Page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/response</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Response</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/response/index.md">https://github.com/mdn/content/blob/main/files/en-us/web/api/response/index.md</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/06105598d11001e9f12d80ad05087f1df3c0634b/hovercard" href="https://github.com/mdn/content/commit/06105598d11001e9f12d80ad05087f1df3c0634b"><tt>0610559</tt></a></li>
<li>Document last modified: 2022-10-10T09:00:13.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[fetch] Incorrect or outdated information at fetch() and Fetch API pages]]></title>
            <link>https://github.com/mdn/content/issues/17115</link>
            <guid>https://github.com/mdn/content/issues/17115</guid>
            <pubDate>Wed, 08 Jun 2022 21:48:36 GMT</pubDate>
            <content:encoded><![CDATA[<h3 dir="auto">MDN URL</h3>
<p dir="auto"><a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/fetch</a></p>
<h3 dir="auto">What specific section or headline is this issue about?</h3>
<p dir="auto">Introduction and "Exceptions". At "Exceptions", the part about TypeError and the table listing all the reasons for it to happen. I didn't find anything that could justify my results in that list.</p>
<h3 dir="auto">What information was incorrect, unhelpful, or incomplete?</h3>
<blockquote>
<p dir="auto">A <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch" rel="nofollow">fetch()</a> promise only rejects when a network error is encountered (which is usually when there's a permissions issue or similar). A <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch" rel="nofollow">fetch()</a> promise does not reject on HTTP errors (404, etc.). Instead, a then() handler must check the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/ok" rel="nofollow">Response.ok</a> and/or <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/status" rel="nofollow">Response.status</a> properties.</p>
</blockquote>
<h3 dir="auto">What did you expect to see?</h3>
<p dir="auto">I was expecting to trigger the execution of my success callback inside <code class="notranslate">then()</code> since http errors 4xx and 5xx should not reject the fetch promise. Instead, the error callback was executed.</p>
<p dir="auto">It seems to me that the information in the fetch() and  Fetch API pages are incorrect or outdated. I've made some tests and found that fetch is indeed rejecting promises when 400 status code is returned. I didn't try other error codes.</p>
<h3 dir="auto">Do you have any supporting links, references, or citations?</h3>
<p dir="auto"><a href="https://stackoverflow.com/questions/45899931/typeerror-failed-to-fetch-trying-to-perform-an-post-request-on-api-hosted-on-he/72552340#72552340" rel="nofollow">https://stackoverflow.com/questions/45899931/typeerror-failed-to-fetch-trying-to-perform-an-post-request-on-api-hosted-on-he/72552340#72552340</a></p>
<p dir="auto"><a href="https://forum.freecodecamp.org/t/type-error-failed-to-fetch-when-using-fetch-api/456214/5" rel="nofollow">https://forum.freecodecamp.org/t/type-error-failed-to-fetch-when-using-fetch-api/456214/5</a></p>
<h3 dir="auto">Do you have anything more you want to share?</h3>
<p dir="auto">Here is my test:</p>
<ul dir="auto">
<li>Setup a server with some POST methods and respective OPTIONS methods to support preflight requests</li>
<li>Define some required field in the request body. If the request has the field, make your server return 200. Else, return 400.</li>
<li>Send a request with and without the field and check which callback is fired inside <code class="notranslate">then()</code>.</li>
</ul>
<p dir="auto">Request code example:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="  function test_fetch(){
	  let message = JSON.stringify({
             // 'ids' is the expected field. Change it latter for 'id' or something else to see the error.
             ids: [1] 
	  })
  
	  fetch('http://your.api/get_data',{
		  method: 'post',
                  // Adding Content-Type header to enable preflight. 
                  // It's still not working even with normal(no-preflight) requests.
                  // To test with normal instead of preflight requests,
                  // remove the line below from the fetch options object and
                  // make sure your server can handle text/plain data or else
                  // you may face some error due to wrong parsing of request body.
		  headers: {'Content-Type': 'application/json'},
		  body: message
	  })
	  .then(data =&gt; console.log('success'),data =&gt; console.log('error'))
  }"><pre class="notranslate">  <span class="pl-k">function</span> <span class="pl-en">test_fetch</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">{</span>
	  <span class="pl-k">let</span> <span class="pl-s1">message</span> <span class="pl-c1">=</span> <span class="pl-c1">JSON</span><span class="pl-kos">.</span><span class="pl-en">stringify</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
             <span class="pl-c">// 'ids' is the expected field. Change it latter for 'id' or something else to see the error.</span>
             <span class="pl-c1">ids</span>: <span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">]</span> 
	  <span class="pl-kos">}</span><span class="pl-kos">)</span>
  
	  <span class="pl-en">fetch</span><span class="pl-kos">(</span><span class="pl-s">'http://your.api/get_data'</span><span class="pl-kos">,</span><span class="pl-kos">{</span>
		  <span class="pl-c1">method</span>: <span class="pl-s">'post'</span><span class="pl-kos">,</span>
                  <span class="pl-c">// Adding Content-Type header to enable preflight. </span>
                  <span class="pl-c">// It's still not working even with normal(no-preflight) requests.</span>
                  <span class="pl-c">// To test with normal instead of preflight requests,</span>
                  <span class="pl-c">// remove the line below from the fetch options object and</span>
                  <span class="pl-c">// make sure your server can handle text/plain data or else</span>
                  <span class="pl-c">// you may face some error due to wrong parsing of request body.</span>
		  <span class="pl-c1">headers</span>: <span class="pl-kos">{</span><span class="pl-s">'Content-Type'</span>: <span class="pl-s">'application/json'</span><span class="pl-kos">}</span><span class="pl-kos">,</span>
		  <span class="pl-c1">body</span>: <span class="pl-s1">message</span>
	  <span class="pl-kos">}</span><span class="pl-kos">)</span>
	  <span class="pl-kos">.</span><span class="pl-en">then</span><span class="pl-kos">(</span><span class="pl-s1">data</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">'success'</span><span class="pl-kos">)</span><span class="pl-kos">,</span><span class="pl-s1">data</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">'error'</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
  <span class="pl-kos">}</span></pre></div>
<p dir="auto">I've tested in <code class="notranslate">Chrome, version 102.0.5005.61 (Official Build) (64-bit)</code> and <code class="notranslate">Firefox, version 75.0 (64-bit)</code>. Got the same unexpected behaviour in both.</p>
<h3 dir="auto">MDN metadata</h3>

<details>
<summary>Page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/fetch</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/fetch</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/fetch/index.md">https://github.com/mdn/content/blob/main/files/en-us/web/api/fetch/index.md</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/196cc4ff3068a59b962a3fe1cbb960eb72ef542b/hovercard" href="https://github.com/mdn/content/commit/196cc4ff3068a59b962a3fe1cbb960eb72ef542b"><tt>196cc4f</tt></a></li>
<li>Document last modified: 2022-05-31T04:47:00.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[fetch] Issue with "Response.json()": Possible exceptions not documented]]></title>
            <link>https://github.com/mdn/content/issues/13208</link>
            <guid>https://github.com/mdn/content/issues/13208</guid>
            <pubDate>Tue, 22 Feb 2022 13:11:28 GMT</pubDate>
            <content:encoded><![CDATA[<p dir="auto">MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/json" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Response/json</a></p>
<h4 dir="auto">What information was incorrect, unhelpful, or incomplete?</h4>
<p dir="auto">This function can raise exceptions, but these are not documented. Try using it on a response that is not actually JSON, e.g.</p>
<h4 dir="auto">Specific section or headline?</h4>
<p dir="auto">Exceptions</p>
<h4 dir="auto">What did you expect to see?</h4>
<p dir="auto">The list of possible exceptions and their causes. See the <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch#exceptions" rel="nofollow"><code class="notranslate">fetch</code></a> documentation for an example of a function that documents its exceptions well.</p>

<details>
<summary>MDN Content page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/response/json</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/json" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Response/json</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/response/json/index.md">https://github.com/mdn/content/blob/main/files/en-us/web/api/response/json/index.md</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/93ae23dec42bba9d71d6f1ed45668d8d26847e9c/hovercard" href="https://github.com/mdn/content/commit/93ae23dec42bba9d71d6f1ed45668d8d26847e9c"><tt>93ae23d</tt></a></li>
<li>Document last modified: 2022-02-18T09:26:54.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[fetch] Content bug: Inaccurate explanation on request credentials]]></title>
            <link>https://github.com/mdn/content/issues/13063</link>
            <guid>https://github.com/mdn/content/issues/13063</guid>
            <pubDate>Thu, 17 Feb 2022 09:18:12 GMT</pubDate>
            <content:encoded><![CDATA[<h2 dir="auto">What page(s) did you find the problem on?</h2>
<ul dir="auto">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials</a></li>
</ul>
<h2 dir="auto">Specific page section or heading?</h2>
<ul dir="auto">
<li>Under Syntax &gt; Value for the request credentials page</li>
<li>The intro text for the Access-Control-Allow-Credentials page</li>
</ul>
<h2 dir="auto">What is the problem?</h2>
<p dir="auto">There are a few problems:</p>
<ol dir="auto">
<li>Explanation on credentials weren't accurate because Authorisation headers were sent regardless whether 'credentials' were set to <code class="notranslate">omit</code>, <code class="notranslate">same-origin</code>, or <code class="notranslate">include</code>.</li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/3607637/154285142-f0198862-7534-4f13-8cd8-1634f4ea7ddd.png"><img src="https://user-images.githubusercontent.com/3607637/154285142-f0198862-7534-4f13-8cd8-1634f4ea7ddd.png" alt="FLsiY4PVQAIMy9r" style="max-width: 100%;"></a></p>
<ol start="2" dir="auto">
<li>The <code class="notranslate">Access-Control-Allow-Credentials</code> page mentioned that credentials are cookies, authorization headers, or TLS client certificates.</li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/3607637/154286505-56304bc9-ee6b-4d49-ae71-1efaa7b6b3c9.png"><img src="https://user-images.githubusercontent.com/3607637/154286505-56304bc9-ee6b-4d49-ae71-1efaa7b6b3c9.png" alt="CleanShot 2022-02-16 at 22 34 26" style="max-width: 100%;"></a></p>
<p dir="auto">A few things here:</p>
<ol dir="auto">
<li><code class="notranslate">Access-Control-Allow-Credentials</code> are not required for Authorization headers. They can be sent regardless whether <code class="notranslate">Access-Control-Allow-Credentials</code> is present.</li>
<li>Authorization headers only need <code class="notranslate">Authorization</code> to be included <code class="notranslate">Access-Control-Allowed-Headers</code>.</li>
<li><code class="notranslate">Access-Control-Allow-Credentials</code> are not required to send cookies between domains and subdomains. This is not listed anywhere but I thought it'll be good to make things clear.</li>
</ol>
<h2 dir="auto">What did you expect to see?</h2>
<p dir="auto">Three things:</p>
<ol dir="auto">
<li>I recommend removing "basic http auth" from the request credentials page since it doesn't look correct.</li>
<li>I recommend updating the pages to reflect a more accurate understanding for Access-Control-Allow-Credentials. Not sure what to update at this point, but I can take a stab at it.</li>
<li>Maybe we can point the "etc" part in Request Credentials page to the Access-Control-Allow-Credentials page because they seem linked. I'm not sure whether this is accurate though.</li>
</ol>
<h2 dir="auto">Did you test this? If so, how?</h2>
<p dir="auto">I tested <code class="notranslate">credentials</code> and wrote <a href="https://zellwk.com/blog/how-fetch-credentials-handles-cookies/" rel="nofollow">an article</a> about my tests. I focused on cookies in this article and didn't include the Authorization header parts. There's a test repository included in the article. I can create a test repo for the authorization part if necessary. Just let me know.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[fetch] Issue with "Response.error()": Example missing]]></title>
            <link>https://github.com/mdn/content/issues/12852</link>
            <guid>https://github.com/mdn/content/issues/12852</guid>
            <pubDate>Wed, 09 Feb 2022 07:32:59 GMT</pubDate>
            <content:encoded><![CDATA[<p dir="auto">MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/error" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Response/error</a></p>
<h4 dir="auto">What information was incorrect, unhelpful, or incomplete?</h4>
<p dir="auto">The example says <code class="notranslate">TBD (does not yet appear to be supported anywhere).</code> But under support it has full support (excl IE, but thats a given)</p>
<h4 dir="auto">Specific section or headline?</h4>
<p dir="auto"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/error#example" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Response/error#example</a></p>
<h4 dir="auto">What did you expect to see?</h4>
<p dir="auto">One of your usual very helpful examples. The description is great for understanding, but if one is not very good at JavaScript, the example really helps one to use the object with the right syntax.</p>
<p dir="auto">Well done for the brillant reference you have!</p>

<details>
<summary>MDN Content page report details</summary>
<ul dir="auto">
<li>Folder: <code class="notranslate">en-us/web/api/response/error</code></li>
<li>MDN URL: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/error" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/API/Response/error</a></li>
<li>GitHub URL: <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/response/error/index.md">https://github.com/mdn/content/blob/main/files/en-us/web/api/response/error/index.md</a></li>
<li>Last commit: <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/mdn/content/commit/4072b1033d73e9d7ee8ff6290f24057fc97e8a58/hovercard" href="https://github.com/mdn/content/commit/4072b1033d73e9d7ee8ff6290f24057fc97e8a58"><tt>4072b10</tt></a></li>
<li>Document last modified: 2021-11-09T06:44:18.000Z</li>
</ul>
</details>]]></content:encoded>
        </item>
    </channel>
</rss>